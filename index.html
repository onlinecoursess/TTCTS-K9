<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ Thống Bài Tập K9 - Beli</title>
    
    <!-- Meta Description -->
    <meta name="description" content="Hệ thống làm bài tập trực tuyến cho học sinh K9. Nền tảng học tập thông minh với đầy đủ bài tập, kiểm tra và theo dõi tiến độ học tập.">
    <meta name="keywords" content="bài tập K9, học tập K9, hệ thống bài tập, Beli, học trực tuyến">
    <meta name="author" content="Beli">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Hệ Thống Bài Tập K9 - Beli">
    <meta property="og:description" content="Hệ thống làm bài tập trực tuyến cho học sinh K9. Nền tảng học tập thông minh với đầy đủ bài tập, kiểm tra và theo dõi tiến độ học tập.">
    <meta property="og:image" content="https://tshbeli.com.vn/wp-content/uploads/2024/10/anh-logo-Beli.jpg">
    <meta property="og:type" content="website">
    
    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="https://tshbeli.com.vn/wp-content/uploads/2024/10/anh-logo-Beli.jpg">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
    background: #f5f7fa;
    min-height: 100vh;
    padding: 20px 12px;
    line-height: 1.5;
    color: #3a3a3a;
}

.container {
    max-width: 900px;
    margin: 0 auto;
    background: white;
    border-radius: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    overflow: hidden;
}

.header {
    background: white;
    padding: 24px 24px 20px 24px;
    border-bottom: 1px solid #e8eaed;
    border-top: 8px solid #e57373;
}

.header h1 {
    color: #3a3a3a;
    font-size: 20px;
    font-weight: 500;
    margin-bottom: 6px;
}

.header p {
    color: #5f6368;
    font-size: 13px;
}

.lesson-selector, .teacher-panel {
    background: white;
    padding: 24px;
    border-bottom: 1px solid #e8eaed;
    display: none;
}

.student-id-display {
    background: #e3f2fd;
    padding: 16px;
    border-radius: 8px;
    margin-bottom: 20px;
    border-left: 4px solid #2196f3;
}

.student-id-display strong {
    color: #1565c0;
    font-size: 15px;
}

.exercise-status-container {
    border: 1px solid #e8eaed;
    border-radius: 8px;
    margin-bottom: 24px;
    background: white;
}

.exercise-status-header {
    padding: 14px 16px;
    font-weight: 500;
    color: #3a3a3a;
    font-size: 14px;
    border-bottom: 1px solid #e8eaed;
    display: flex;
    align-items: center;
}

.exercise-status-header::before {
    content: '📋';
    margin-right: 8px;
    font-size: 16px;
}

.exercise-grid {
    padding: 16px;
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
}

.exercise-button {
    background-color: #ffebee;
    color: #c62828;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
    border: 1px solid transparent;
    cursor: default;
    transition: all 0.2s ease;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}

.exercise-button.completed {
    background-color: #e8f5e9;
    color: #2e7d32;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    color: #3a3a3a;
    font-weight: 500;
    font-size: 13px;
}

.form-group select, .form-group input, .form-group textarea {
    width: 100%;
    padding: 12px 14px;
    border: 1px solid #dadce0;
    border-radius: 4px;
    font-size: 14px;
    background: white;
    color: #3a3a3a;
    font-family: inherit;
}

.form-group textarea {
    min-height: 80px;
    resize: vertical;
    line-height: 1.5;
}

.form-group select:focus, .form-group input:focus, .form-group textarea:focus {
    outline: none;
    border-color: #e57373;
}

.btn {
    background: #e57373;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 4px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    width: 100%;
}

.btn:hover:not(:disabled) {
    background: #ef5350;
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: #bdc1c6;
}

.btn-secondary {
    background: #5f6368;
    margin-top: 12px;
}

.btn-secondary:hover:not(:disabled) {
    background: #3a3a3a;
}

.btn-small {
    padding: 8px 16px;
    width: auto;
    display: inline-block;
    margin: 4px;
}

.loading {
    text-align: center;
    padding: 20px;
    color: #5f6368;
    font-size: 13px;
}

.skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
    border-radius: 4px;
}

@keyframes loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

.skeleton-text {
    height: 16px;
    margin: 8px 0;
}

.skeleton-button {
    height: 40px;
    margin: 8px 0;
}

.quiz-container, .grading-container, .history-container {
    background: white;
    padding: 24px;
    display: none;
}

.quiz-header {
    text-align: center;
    margin-bottom: 24px;
    padding-bottom: 20px;
    border-bottom: 1px solid #e8eaed;
}

.quiz-header h2 {
    color: #3a3a3a;
    font-size: 18px;
    font-weight: 500;
    margin-bottom: 6px;
}

.question-card {
    background: white;
    padding: 24px;
    margin: 16px 0;
    border-radius: 8px;
    border: 1px solid #e8eaed;
}

.question-number {
    color: #e57373;
    font-weight: 500;
    font-size: 12px;
    margin-bottom: 8px;
    text-transform: uppercase;
}

.question-type-badge {
    display: inline-block;
    background: #fff3e0;
    color: #e65100;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
    margin-bottom: 10px;
}

.question-image {
    width: 100%;
    max-height: 240px;
    object-fit: contain;
    margin: 12px 0;
    border-radius: 4px;
    border: 1px solid #e8eaed;
}

.question-text {
    font-size: 14px;
    color: #3a3a3a;
    margin: 12px 0;
    line-height: 1.6;
}

.options {
    margin: 16px 0;
}

.option {
    background: white;
    padding: 12px 14px;
    margin: 8px 0;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid #e8eaed;
    display: flex;
    align-items: center;
    font-size: 14px;
}

.option:hover {
    background: #f8f9fa;
}

.option.selected {
    background: #fce4ec;
    color: #c2185b;
    border-color: #f48fb1;
}

.option input[type="checkbox"] {
    margin-right: 12px;
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: #e57373;
}

.option label {
    cursor: pointer;
    flex: 1;
}

.fill-blank-input, .open-ended-input {
    width: 100%;
    padding: 12px 14px;
    border: 1px solid #dadce0;
    border-radius: 4px;
    font-size: 14px;
    font-family: inherit;
    transition: all 0.2s ease;
    color: #3a3a3a;
}

.fill-blank-input:focus, .open-ended-input:focus {
    outline: none;
    border-color: #e57373;
}

.open-ended-input {
    min-height: 120px;
    resize: vertical;
    line-height: 1.5;
}

.open-ended-notice {
    background: #e3f2fd;
    padding: 12px 16px;
    margin-top: 8px;
    border-radius: 4px;
    font-size: 13px;
    color: #1565c0;
    border-left: 3px solid #2196f3;
}

.submit-section {
    position: sticky;
    bottom: 16px;
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    margin-top: 24px;
    text-align: center;
}

.results {
    background: white;
    padding: 32px 24px;
    text-align: center;
    display: none;
}

.results h2 {
    color: #3a3a3a;
    font-size: 24px;
    font-weight: 500;
    margin-bottom: 12px;
}

.score {
    font-size: 42px;
    font-weight: 600;
    color: #66bb6a;
    margin: 20px 0;
}

.result-details {
    background: #fafafa;
    padding: 20px;
    border-radius: 8px;
    margin: 20px 0;
    text-align: left;
    max-height: 450px;
    overflow-y: auto;
    border: 1px solid #e8eaed;
}

.result-item {
    padding: 12px 14px;
    margin: 8px 0;
    border-radius: 4px;
    font-size: 13px;
    line-height: 1.5;
    border-left: 3px solid transparent;
}

.result-item.correct {
    background: #e8f5e9;
    color: #2e7d32;
    border-left-color: #66bb6a;
}

.result-item.incorrect {
    background: #ffebee;
    color: #c62828;
    border-left-color: #ef5350;
}

.result-item.open {
    background: #e1f5fe;
    color: #01579b;
    border-left-color: #4fc3f7;
}

.submission-card {
    background: white;
    border: 1px solid #e8eaed;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 16px;
}

.submission-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid #e8eaed;
}

.submission-info {
    font-size: 14px;
    color: #5f6368;
}

.submission-info strong {
    color: #3a3a3a;
    display: block;
    margin-bottom: 4px;
}

.grading-status {
    padding: 6px 12px;
    border-radius: 16px;
    font-size: 12px;
    font-weight: 500;
}

.grading-status.pending {
    background: #fff9e6;
    color: #f57c00;
}

.grading-status.graded {
    background: #e8f5e9;
    color: #2e7d32;
}

.answer-section {
    margin: 16px 0;
}

.answer-section h4 {
    font-size: 13px;
    color: #5f6368;
    margin-bottom: 8px;
    text-transform: uppercase;
    font-weight: 500;
}

.answer-content {
    background: #f8f9fa;
    padding: 12px;
    border-radius: 4px;
    font-size: 14px;
    line-height: 1.6;
    white-space: pre-wrap;
}

.grading-controls {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 16px;
}

.grading-controls input[type="number"] {
    padding: 10px 12px;
    border: 1px solid #dadce0;
    border-radius: 4px;
    font-size: 14px;
}

.grading-controls textarea {
    padding: 10px 12px;
    border: 1px solid #dadce0;
    border-radius: 4px;
    font-size: 14px;
    min-height: 80px;
    resize: vertical;
    font-family: inherit;
}

.grading-controls button {
    padding: 10px 20px;
    background: #4caf50;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s ease;
}

.grading-controls button:hover {
    background: #45a049;
}

.grade-display {
    background: #e8f5e9;
    color: #2e7d32;
    padding: 12px;
    border-radius: 4px;
    font-weight: 500;
    margin-top: 12px;
}

.comment-display {
    background: #fff3e0;
    color: #e65100;
    padding: 12px;
    border-radius: 4px;
    margin-top: 8px;
    font-size: 13px;
    line-height: 1.5;
}

.error {
    background: #ffebee;
    color: #c62828;
    padding: 16px 20px;
    border-radius: 4px;
    margin: 16px 0;
    border-left: 3px solid #ef5350;
    font-size: 13px;
}

.stats-card {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 20px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 16px;
}

.stat-item {
    text-align: center;
}

.stat-value {
    font-size: 28px;
    font-weight: 600;
    color: #e57373;
}

.stat-label {
    font-size: 12px;
    color: #5f6368;
    text-transform: uppercase;
    margin-top: 4px;
}

.history-item {
    background: white;
    border: 1px solid #e8eaed;
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.history-item:hover {
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border-color: #e57373;
}

.history-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.history-score {
    font-size: 18px;
    font-weight: 600;
    color: #66bb6a;
}

.history-time {
    font-size: 12px;
    color: #5f6368;
}

.history-detail {
    font-size: 13px;
    color: #5f6368;
    margin-top: 4px;
}

.filter-section {
    background: white;
    margin-bottom: 12px;
    border: 1px solid #e8eaed;
    border-radius: 8px;
    overflow: hidden;
}

.filter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    background: #f8f9fa;
    cursor: pointer;
    transition: all 0.2s ease;
    font-weight: 500;
    font-size: 14px;
    color: #3a3a3a;
}

.filter-header:hover {
    background: #f0f1f2;
}

.toggle-icon {
    transition: transform 0.3s ease;
    font-size: 12px;
    color: #5f6368;
}

.toggle-icon.rotated {
    transform: rotate(-180deg);
}

.filter-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    background: white;
}

.filter-content.expanded {
    max-height: 300px;
    padding: 8px 0;
}

.filter-option {
    display: flex;
    align-items: center;
    padding: 10px 16px;
    cursor: pointer;
    transition: background 0.2s ease;
}

.filter-option:hover {
    background: #f8f9fa;
}

.filter-option input[type="radio"] {
    margin-right: 10px;
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: #e57373;
}

.filter-option label {
    cursor: pointer;
    flex: 1;
    font-size: 14px;
    color: #3a3a3a;
}

.student-submission-group {
    border: 1px solid #e8eaed;
    border-radius: 8px;
    margin-bottom: 16px;
    overflow: hidden;
    background: white;
}

.student-group-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: #f8f9fa;
    cursor: pointer;
    transition: background 0.2s ease;
}

.student-group-header:hover {
    background: #f1f3f4;
}

.student-info strong {
    font-size: 15px;
    color: #3a3a3a;
}

.student-info span {
    font-size: 13px;
    color: #5f6368;
    margin-left: 12px;
}

.student-group-header .toggle-icon {
    font-size: 14px;
}

.student-group-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease-out;
    padding: 0 12px;
}

.student-group-content.expanded {
    max-height: 2000px;
    padding: 12px;
}

.notification-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 10000;
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-width: 420px;
    width: calc(100% - 40px);
}

.notification {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    padding: 16px 20px;
    display: flex;
    align-items: flex-start;
    gap: 12px;
    animation: slideIn 0.3s ease-out;
    border-left: 4px solid #e8eaed;
    position: relative;
    overflow: hidden;
}

.notification::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    height: 3px;
    background: currentColor;
    animation: progress 5s linear;
    width: 100%;
}

@keyframes slideIn {
    from {
        transform: translateX(120%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOut {
    to {
        transform: translateX(120%);
        opacity: 0;
    }
}

@keyframes progress {
    from {
        width: 100%;
    }
    to {
        width: 0%;
    }
}

.notification.removing {
    animation: slideOut 0.3s ease-in forwards;
}

.notification-icon {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    font-size: 14px;
    font-weight: 600;
}

.notification-content {
    flex: 1;
    min-width: 0;
}

.notification-title {
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 4px;
    color: #3a3a3a;
}

.notification-message {
    font-size: 13px;
    line-height: 1.5;
    color: #5f6368;
}

.notification-close {
    flex-shrink: 0;
    width: 20px;
    height: 20px;
    border: none;
    background: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    color: #5f6368;
    font-size: 18px;
    line-height: 1;
    transition: all 0.2s ease;
    padding: 0;
}

.notification-close:hover {
    background: #f1f3f4;
    color: #3a3a3a;
}

.notification.success {
    border-left-color: #4caf50;
}

.notification.success::before {
    background: #4caf50;
}

.notification.success .notification-icon {
    background: #e8f5e9;
    color: #2e7d32;
}

.notification.error {
    border-left-color: #f44336;
}

.notification.error::before {
    background: #f44336;
}

.notification.error .notification-icon {
    background: #ffebee;
    color: #c62828;
}

.notification.warning {
    border-left-color: #ff9800;
}

.notification.warning::before {
    background: #ff9800;
}

.notification.warning .notification-icon {
    background: #fff3e0;
    color: #e65100;
}

.notification.info {
    border-left-color: #2196f3;
}

.notification.info::before {
    background: #2196f3;
}

.notification.info .notification-icon {
    background: #e3f2fd;
    color: #1565c0;
}

.confirm-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10001;
    animation: fadeIn 0.2s ease-out;
    padding: 20px;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.confirm-dialog {
    background: white;
    border-radius: 16px;
    padding: 24px;
    max-width: 420px;
    width: 100%;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    animation: scaleIn 0.3s ease-out;
}

@keyframes scaleIn {
    from {
        transform: scale(0.9);
        opacity: 0;
    }
    to {
        transform: scale(1);
        opacity: 1;
    }
}

.confirm-header {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 16px;
}

.confirm-icon {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    flex-shrink: 0;
    background: #fff3e0;
    color: #e65100;
}

.confirm-text {
    flex: 1;
}

.confirm-title {
    font-size: 18px;
    font-weight: 600;
    color: #3a3a3a;
    margin-bottom: 8px;
}

.confirm-message {
    font-size: 14px;
    color: #5f6368;
    line-height: 1.5;
}

.confirm-actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
}

.confirm-btn {
    flex: 1;
    padding: 12px 20px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    border: none;
    transition: all 0.2s ease;
}

.confirm-btn.cancel {
    background: #f1f3f4;
    color: #5f6368;
}

.confirm-btn.cancel:hover {
    background: #e8eaed;
}

.confirm-btn.confirm {
    background: #e57373;
    color: white;
}

.confirm-btn.confirm:hover {
    background: #ef5350;
}

@media (max-width: 640px) {
    .btn-small {
        width: 100%;
        margin: 4px 0;
    }
    
    .notification-container {
        top: 10px;
        right: 10px;
        width: calc(100% - 20px);
        max-width: none;
    }
    
    .confirm-actions {
        flex-direction: column;
    }
}
</style>
</head>
<body>
    <div class="notification-container" id="notificationContainer"></div>

    <div class="container">
        <div class="header">
            <h1>🎓 Hệ Thống Bài Tập</h1>
            <p id="userInfo">Đang tải...</p>
        </div>
        
        <div class="lesson-selector" id="lessonSelector">
            <div class="student-id-display" id="studentIdDisplay"></div>
            <div class="exercise-status-container" id="exerciseStatusContainer" style="display: none;">
                <div class="exercise-status-header" id="exerciseStatusHeader">Tình trạng Bài tập</div>
                <div class="exercise-grid" id="exerciseGrid"></div>
            </div>
            <div class="form-group">
                <label for="sessionSelect">Chọn Buổi:</label>
                <select id="sessionSelect">
                    <option value="">-- Chọn buổi học --</option>
                </select>
            </div>
            <div id="historyList"></div>
            <button class="btn" id="startNewBtn" style="display:none;">Làm Bài Mới</button>
            <div id="loadingMessage"></div>
        </div>
        
        <div class="quiz-container" id="quizContainer">
            <div class="quiz-header">
                <h2 id="quizTitle">Bài Tập</h2>
                <p id="quizSubtitle">Hoàn thành tất cả câu hỏi và bấm "Nộp Bài"</p>
            </div>
            <div id="questionsContainer"></div>
            <div class="submit-section">
                <button class="btn" id="submitBtn">Nộp Bài</button>
                <button class="btn btn-secondary" id="cancelBtn">Hủy</button>
            </div>
        </div>
        
        <div class="results" id="results">
            <h2>🎉 Hoàn Thành Bài Tập!</h2>
            <div class="score" id="finalScore"></div>
            <p id="resultMessage"></p>
            <div class="result-details" id="resultDetails"></div>
            <button class="btn" id="backToMenuBtn">Chọn Buổi Khác</button>
        </div>
        
        <div class="history-container" id="historyContainer">
            <div class="quiz-header">
                <h2 id="historyTitle">Chi Tiết Bài Làm</h2>
            </div>
            <div id="historyDetailsContainer"></div>
            <button class="btn btn-secondary" id="backFromHistoryBtn">Quay Lại</button>
        </div>
        
        <div class="teacher-panel" id="teacherPanel">
            <div class="form-group">
                <label for="teacherSessionSelect">Chọn Buổi Cần Chấm:</label>
                <select id="teacherSessionSelect">
                    <option value="">-- Chọn buổi --</option>
                </select>
            </div>
            <div id="teacherLoadingMessage"></div>
        </div>
        
        <div class="grading-container" id="gradingFilters" style="display: none; padding: 16px; border-bottom: 1px solid #e8eaed;">
            <div class="form-group" style="margin-bottom: 12px;">
                <label for="searchStudentInput">🔎 Tìm kiếm theo Mã Học Viên:</label>
                <input type="text" id="searchStudentInput" placeholder="Nhập mã học viên để lọc...">
            </div>
            <div class="filter-section">
                <div class="filter-header" id="statusFilterToggle">
                    <span>📊 Lọc theo trạng thái</span>
                    <span class="toggle-icon" id="statusFilterIcon">▼</span>
                </div>
                <div class="filter-content" id="statusFilterContent">
                    <div class="filter-option" data-filter="all">
                        <input type="radio" name="statusFilter" id="status_all" value="all" checked>
                        <label for="status_all">Tất cả</label>
                    </div>
                    <div class="filter-option" data-filter="pending">
                        <input type="radio" name="statusFilter" id="status_pending" value="pending">
                        <label for="status_pending">Chưa chấm</label>
                    </div>
                    <div class="filter-option" data-filter="graded">
                        <input type="radio" name="statusFilter" id="status_graded" value="graded">
                        <label for="status_graded">Đã chấm</label>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="grading-container" id="gradingContainer">
            <div class="quiz-header">
                <h2 id="gradingTitle">Chấm Bài Tự Luận</h2>
                <p>Nhấn vào từng học viên để xem và chấm bài</p>
            </div>
            <div class="stats-card" id="statsCard"></div>
            <div id="submissionsContainer"></div>
            <button class="btn btn-secondary" id="backToTeacherPanelBtn">⬅️ Quay Lại Chọn Buổi</button>
        </div>
    </div>

    <script>
        const _0x53baa4=_0x3ad4;(function(_0x4423c4,_0x5362cb){const _0x12ff6e=_0x3ad4,_0x5151d2=_0x4423c4();while(!![]){try{const _0x365a9b=parseInt(_0x12ff6e(0x275))/0x1*(-parseInt(_0x12ff6e(0x1c1))/0x2)+parseInt(_0x12ff6e(0x2a4))/0x3*(-parseInt(_0x12ff6e(0x263))/0x4)+parseInt(_0x12ff6e(0x291))/0x5*(parseInt(_0x12ff6e(0x27d))/0x6)+parseInt(_0x12ff6e(0x2e8))/0x7*(parseInt(_0x12ff6e(0x1a9))/0x8)+-parseInt(_0x12ff6e(0x1cb))/0x9+-parseInt(_0x12ff6e(0x2cc))/0xa+parseInt(_0x12ff6e(0x226))/0xb;if(_0x365a9b===_0x5362cb)break;else _0x5151d2['push'](_0x5151d2['shift']());}catch(_0x1263d8){_0x5151d2['push'](_0x5151d2['shift']());}}}(_0x1d89,0xa1a93));const CONFIG={'SPREADSHEET_ID':_0x53baa4(0x1d7),'QUESTION_SHEET':_0x53baa4(0x1d6),'SUBMISSION_SHEET':'ChamBai','CACHE_DURATION':0x5*0x3c*0x3e8,'DEBOUNCE_DELAY':0x12c,'MAX_RETRIES':0x3,'SERVICE_ACCOUNT':{'type':_0x53baa4(0x1e2),'project_id':_0x53baa4(0x190),'private_key_id':_0x53baa4(0x2f3),'private_key':_0x53baa4(0x20a),'client_email':'baitap-video-thansok9@central-alcove-474302-c5.iam.gserviceaccount.com'}},COL={'STUDENT_ID':0x0,'SESSION':0x1,'RECORD_TYPE':0x2,'QUESTION_ID':0x3,'QUESTION_TEXT':0x4,'QUESTIONS_DONE':0x5,'ANSWER':0x6,'SCORE':0x7,'COMMENT':0x8,'STATUS':0x9,'TIMESTAMP':0xa};class Cache{constructor(){const _0x1f4759=_0x53baa4;this[_0x1f4759(0x184)]=new Map();}[_0x53baa4(0x1da)](_0x18316f,_0x359573,_0x43d970=CONFIG[_0x53baa4(0x22d)]){const _0x5a55ca=_0x53baa4;this[_0x5a55ca(0x184)]['set'](_0x18316f,{'value':_0x359573,'expiry':Date[_0x5a55ca(0x24b)]()+_0x43d970});}[_0x53baa4(0x241)](_0x52ac5c){const _0x53cf5f=_0x53baa4,_0x5675a7=this[_0x53cf5f(0x184)]['get'](_0x52ac5c);if(!_0x5675a7)return null;if(Date[_0x53cf5f(0x24b)]()>_0x5675a7[_0x53cf5f(0x1e0)])return this[_0x53cf5f(0x184)][_0x53cf5f(0x208)](_0x52ac5c),null;return _0x5675a7[_0x53cf5f(0x1c5)];}['clear'](){const _0x3f609e=_0x53baa4;this[_0x3f609e(0x184)][_0x3f609e(0x306)]();}}const cache=new Cache();function debounce(_0x1e779c,_0x1f2de3){let _0x2ad20c;return function(..._0xa705c2){const _0x1ee108=_0x3ad4;clearTimeout(_0x2ad20c),_0x2ad20c=setTimeout(()=>_0x1e779c[_0x1ee108(0x2a1)](this,_0xa705c2),_0x1f2de3);};}function showNotification(_0x1aeddc,_0x5ac11e=_0x53baa4(0x249),_0x25d7e4='',_0x51e9c2=0x1388){const _0x4b31bc=_0x53baa4,_0x416a95=document['getElementById']('notificationContainer'),_0x200bfb=document[_0x4b31bc(0x26b)](_0x4b31bc(0x2ad));_0x200bfb[_0x4b31bc(0x29f)]=_0x4b31bc(0x1dd)+_0x5ac11e;const _0x5124e1={'success':'✓','error':'✕','warning':'!','info':'i'},_0xb5b7a1={'success':_0x25d7e4||'Thành\x20công','error':_0x25d7e4||_0x4b31bc(0x232),'warning':_0x25d7e4||_0x4b31bc(0x1b6),'info':_0x25d7e4||_0x4b31bc(0x2fe)};_0x200bfb[_0x4b31bc(0x2b5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-icon\x22>'+_0x5124e1[_0x5ac11e]+_0x4b31bc(0x2b3)+_0xb5b7a1[_0x5ac11e]+_0x4b31bc(0x1ad)+_0x1aeddc+_0x4b31bc(0x274),_0x416a95['appendChild'](_0x200bfb),_0x51e9c2>0x0&&setTimeout(()=>{const _0x5a60d2=_0x4b31bc;_0x200bfb[_0x5a60d2(0x23a)][_0x5a60d2(0x1af)](_0x5a60d2(0x282)),setTimeout(()=>_0x200bfb['remove'](),0x12c);},_0x51e9c2);}window[_0x53baa4(0x301)]=function(_0x270499){const _0x48f77c=_0x53baa4,_0x251d05=_0x270499[_0x48f77c(0x2fb)](_0x48f77c(0x273));_0x251d05&&(_0x251d05[_0x48f77c(0x23a)]['add'](_0x48f77c(0x282)),setTimeout(()=>_0x251d05[_0x48f77c(0x250)](),0x12c));};function showConfirm(_0x37216f,_0x8d4535,_0x50d1c5,_0x4ce629){const _0x374f6f=_0x53baa4;document[_0x374f6f(0x26e)]('.confirm-overlay')?.[_0x374f6f(0x250)]();const _0x94a673=document[_0x374f6f(0x26b)](_0x374f6f(0x2ad));_0x94a673[_0x374f6f(0x29f)]=_0x374f6f(0x22c),_0x94a673[_0x374f6f(0x2b5)]=_0x374f6f(0x2b8)+_0x8d4535+_0x374f6f(0x201)+_0x37216f+_0x374f6f(0x1e6),_0x94a673[_0x374f6f(0x26e)]('.cancel')[_0x374f6f(0x1c0)]=()=>{if(_0x4ce629)_0x4ce629();_0x94a673['remove']();},_0x94a673['querySelector'](_0x374f6f(0x19d))['onclick']=()=>{const _0x5f384f=_0x374f6f;if(_0x50d1c5)_0x50d1c5();_0x94a673[_0x5f384f(0x250)]();},_0x94a673[_0x374f6f(0x1c0)]=_0x501aa3=>{const _0x512a26=_0x374f6f;if(_0x501aa3[_0x512a26(0x2d6)]===_0x94a673)_0x94a673[_0x512a26(0x26e)](_0x512a26(0x194))['click']();},document[_0x374f6f(0x202)]['appendChild'](_0x94a673);}function _0x1d89(){const _0x3bd25f=['Lỗi','replace','submission-card','from','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22question-type-badge\x22>','TIMESTAMP','.student-submission-group\x20.student-group-content.expanded','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','classList','Chi\x20Tiết\x20Bài\x20Làm\x20-\x20Buổi\x20','https://sheets.googleapis.com/v4/spreadsheets/','none','yes','warning','-----BEGIN\x20PRIVATE\x20KEY-----','get','<textarea\x20class=\x22open-ended-input\x22\x20id=\x22openended-','fromCharCode','\x22\x20data-answer=\x22','</div><div\x20class=\x22stat-label\x22>Đã\x20chấm</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-item\x22><div\x20class=\x22stat-value\x22>','<strong>👤\x20Mã\x20Học\x20Viên:\x20','backFromHistoryBtn','SCORE','info','openEnded','now','\x20input:checked','Dữ\x20liệu\x20đã\x20được\x20tải\x20thành\x20công','Buổi\x20này\x20không\x20có\x20bài\x20học\x20cụ\x20thể.','trim','remove','text','display','setAttribute','?valueInputOption=RAW','reduce','</strong><span>','`,\x20`','Chưa\x20chấm','Tất\x20cả\x20các\x20buổi','mahocvien','toggleFilter','\x22><strong>Câu\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22grading-status\x20','Checkbox','image','✗\x20Sai','\x20câu</div>','<div\x20class=\x22loading\x22>Đang\x20tải\x20dữ\x20liệu...</div>','4924UysCSD','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22grade-display\x22>🎯\x20Điểm:\x20','getTypeLabel','statusFilterContent','sessionSelect','gradingContainer','Chế\x20độ:\x20Học\x20Viên','\x0aĐiểm:\x20','createElement','TongKetTracNghiem','.student-group-header','querySelector','Cập\x20nhật\x20điểm','Điền\x20từ','selectedSession','gradeSubmission','.notification','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22notification-close\x22\x20onclick=\x22closeNotification(this)\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','313625qpLffQ','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','searchStudentInput','history-item','SERVICE_ACCOUNT','SUBMISSION_SHEET','loadingMessage','submissionsContainer','2490LBAKQu','backToPanel','Chấm\x20Bài\x20-\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-item\x22><div\x20class=\x22stat-value\x22>','hocsinh','removing','incorrect','Không\x20tìm\x20thấy\x20câu\x20hỏi\x20cho\x20buổi\x20này','toLocaleString','stringify','</span>','filter','loadHistory','populateSessions','\x20|\x20','statusFilterIcon','option5','<div\x20class=\x22history-detail\x22>✍️\x20Tự\x20luận:\x20','message','<div\x20style=\x22margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22display:\x20block;\x20margin-bottom:\x206px;\x20font-weight:\x20500;\x20color:\x20#5f6368;\x20font-size:\x2013px;\x22>Ô\x20','445StkYtl','studentid','✓\x20Đúng','option1','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22student-group-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22student-info\x22><strong>Học\x20viên:\x20','</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22grade-btn\x22>','JWT','option3','Bearer\x20','questionText','dataset','graded','application/x-www-form-urlencoded',')\x22>Sửa\x20bài\x20làm</button>','className','Bắt\x20đầu\x20làm\x20bài\x20với\x20','apply','toLowerCase','.comment-input','2616THVVPu','Tự\x20luận','Fill-in-the-Blank','teacherSessionSelect','selectFilter','textContent','processSubmission','displayHistory','\x22\x20placeholder=\x22Nhập\x20câu\x20trả\x20lời...\x22\x20data-letter=\x22','div','option4','Vui\x20lòng\x20nhập\x20câu\x20trả\x20lời','Lỗi\x20lưu\x20bài\x20nộp:','SPREADSHEET_ID','openended-','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-title\x22>','multipleChoice','innerHTML','</div><div\x20class=\x22stat-label\x22>Tổng\x20cộng</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20câu\x20hỏi','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22confirm-dialog\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22confirm-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22confirm-icon\x22>?</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22confirm-text\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22confirm-title\x22>','reverse','questionsContainer','\x22\x20placeholder=\x22Nhập\x20điểm\x20(0-10)\x22\x20min=\x220\x22\x20max=\x2210\x22\x20step=\x220.5\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20class=\x22comment-input\x22\x20placeholder=\x22Nhập\x20nhận\x20xét...\x22>','cancelBtn','isEditMode','<div\x20class=\x22error\x22>Không\x20có\x20bài\x20tự\x20luận\x20nào\x20cần\x20chấm.</div>','filteredSubmissions','style','Initialization\x20error:','Đã\x20hoàn\x20thành','RS256','studentIdDisplay','<div\x20class=\x22error\x22>⚠️\x20Vui\x20lòng\x20truy\x20cập\x20với\x20mode\x20hợp\x20lệ<br><small>Sử\x20dụng:\x20?mode=hocsinh&mahocvien=HV001\x20hoặc\x20?mode=giaovien</small></div>','appendChild','Đã\x20chấm\x20bài\x20thành\x20công','historyContainer','loadData','parentElement','/values/','12177560NvSgWH','grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer&assertion=','SHA-256','querySelectorAll','updateCell','cancelEdit','split','map','timestamp','allQuestions','target','<div\x20class=\x22error\x22>Không\x20tìm\x20thấy\x20bài\x20nộp\x20phù\x20hợp\x20với\x20bộ\x20lọc.</div>','exerciseStatusContainer','\x22\x20placeholder=\x22Nhập\x20câu\x20trả\x20lời\x20của\x20bạn...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22open-ended-notice\x22>📝\x20Câu\x20tự\x20luận\x20-\x20Giáo\x20viên\x20sẽ\x20chấm\x20điểm\x20sau</div>','keys','questionsDone','answer','allSubmissions','type','teacher','</div><div\x20class=\x22stat-label\x22>Đang\x20hiển\x20thị</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-item\x22><div\x20class=\x22stat-value\x22>','saveSubmission','quizContainer','student-submission-group','Lưu\x20Thay\x20Đổi','applyFilters','fillblank-','quizSubtitle','728drWAuV','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','input','Multiple\x20Choice','rotated','checked','block','<div\x20class=\x22option\x22><input\x20type=\x22checkbox\x22\x20id=\x22q','toUpperCase','init','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22grading-controls\x22\x20data-row=\x22','9ce900c7ffbc2dbaeb1632791b9f3890d98c9d13','<div\x20class=\x22error\x22>Lỗi:\x20','.toggle-icon','<span\x20class=\x22history-score\x22>','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','json','<h3\x20style=\x22margin:\x2016px\x200\x2012px\x200;\x20font-size:\x2015px;\x22>Lịch\x20sử\x20làm\x20bài:</h3>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22question-type-badge\x22>Tự\x20luận</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22question-text\x22>','closest','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','\x20câu\x20trắc\x20nghiệm','Thông\x20báo','toggleStudentGroup','correct','closeNotification','fill','lesson','rowIndex','statusFilterToggle','clear','findIndex',':</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22fill-blank-input\x22\x20id=\x22fillblank-','STUDENT_ID','selected','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22answer-section\x22><h4>Câu\x20trả\x20lời\x20của\x20bạn:</h4><div\x20class=\x22answer-content\x22>','results','includes','sessionsData','MAX_RETRIES','onload','/values:batchUpdate','displayOverallStatus','\x20.option.selected','<h3\x20style=\x22margin-bottom:\x2015px;\x22>Chi\x20tiết:</h3>','Chế\x20độ:\x20Giáo\x20Viên','.student-group-content','Buổi\x20','values','expanded','sheet_','</div><div\x20class=\x22stat-label\x22>Chưa\x20chấm</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-item\x22><div\x20class=\x22stat-value\x22>','📝\x20Chờ\x20chấm','.student-submission-group[data-studentid=\x22','appendRows','Tổng\x20kết\x20','data','has','\x20(Có\x20','subtle','<div\x20style=\x22background:\x20#fff3e0;\x20padding:\x2012px;\x20border-radius:\x204px;\x20color:\x20#e65100;\x20margin-top:\x2012px;\x22>⏳\x20Giáo\x20viên\x20chưa\x20chấm\x20bài\x20này</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-small\x22\x20onclick=\x22app.student.editSubmission(','BaiLamTuLuan','Vui\x20lòng\x20nhập\x20điểm','giaovien','isCorrect','<div\x20class=\x22loading\x22>Đang\x20tải\x20lịch\x20sử...</div>','studentId','question-card','central-alcove-474302-c5','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22question-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22question-number\x22>Câu\x20','vi-VN','Lỗi\x20khi\x20cập\x20nhật:\x20','.cancel','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22submission-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22submission-info\x22><strong>Câu\x20','all','status_','`,\x20','submitAnswers','batchUpdate','option','.grade-input','.confirm','editingSubmissionId','success','.filter-option','getSheetData','addEventListener','backToMenu','data-studentid','Error\x20getting\x20access\x20token:','pow','mode','accessToken','37056bPqUhx','RSASSA-PKCS1-v1_5','resultMessage','QUESTIONS_DONE','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-message\x22>','every','add','quizTitle','STATUS','submitBtn','toggle','RECORD_TYPE','SESSION','Cảnh\x20báo','sign','\x20câu\x20tự\x20luận\x20chờ\x20giáo\x20viên\x20chấm)','</div>','<img\x20src=\x22','click','Nộp\x20Bài','fetchWithRetry','teacherLoadingMessage','COMMENT','onclick','2VZoPij','\x20(Tự\x20luận)</strong>','statsCard','.grading-controls','value','teacherPanel','#question-','Tải\x20thành\x20công\x20','startNewQuiz','(Không\x20có\x20câu\x20trả\x20lời)','2825685nXYIDb','Lỗi\x20khởi\x20tạo:\x20','\x20-\x20Buổi\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22submission-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22submission-info\x22><strong>📝\x20Tổng\x20kết\x20Trắc\x20nghiệm</strong>','slice','QUESTION_TEXT','status','<option\x20value=\x22\x22>--\x20Chọn\x20buổi\x20--</option><option\x20value=\x22all\x22>Tất\x20cả\x20các\x20buổi</option>','application/json','find','comment','BaiTap','1L19bXVPmGluBNM6ifvrqduwzO4nLz2kkrU-IPgBbOgs','\x22\x20style=\x22margin-left:\x208px;\x22>','floor','set','-----END\x20PRIVATE\x20KEY-----','<div\x20class=\x22question-text\x22>','notification\x20','getAccessToken','Lỗi:\x20Thiếu\x20mã\x20học\x20viên','expiry','<br><small>','service_account','attachEventListeners','forEach','Khá\x20tốt!','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22confirm-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22confirm-btn\x20cancel\x22>Hủy</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22confirm-btn\x20confirm\x22>Xác\x20nhận</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Đã\x20chấm','app','Hoàn\x20thành\x20tất\x20cả\x20câu\x20hỏi\x20và\x20bấm\x20\x22Nộp\x20Bài\x22','search','location','_opt','<div\x20class=\x22history-detail\x22>📝\x20Trắc\x20nghiệm:\x20','historyList','correctAnswer','</label></div>','completed','option2','backToMenuBtn','QUESTION_SHEET','<div\x20class=\x22comment-display\x22>💬\x20Nhận\x20xét\x20của\x20giáo\x20viên:<br>','access_token','\x0aCâu\x20đã\x20làm:\x20','historyDetailsContainer','client_email','gradingFilters','.option','QUESTION_ID','push','session','Chấm\x20điểm','startNewBtn','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22confirm-message\x22>','body','Cần\x20cố\x20gắng\x20thêm!','currentTarget','Xuất\x20sắc!',',\x20`','error','delete','filteredQuestions','-----BEGIN\x20PRIVATE\x20KEY-----\x0aMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDewrtEHzufVPzh\x0as1RSKdpkta6TbKssaZKL9qMyiAPbB61lFjEvIQmdld3IPgF7wNJvfQy6taq3Z2tL\x0aHzFgkaQSfxsfW9pL3a24WmllCWCb3GpJVmAYdVLUFIYxv6q0cCmOFd0G2HXE8e3N\x0aA7Cqbtge7dgeeiNXPgUws0mGLWQu8esgQByEUsdNWKV1uZSwYKkd9Qmyws6MgmVG\x0aeuGQGNKIvcRS2JdvNjKCvYe/+EqBopkVIrTo9euP77/TLmi6Zh9zs+qfLgA4dW0e\x0a4cGDa3XuMT9aIhYwO58prkqnaHfYRhLJ9kU//zEcoDv+fpVmIDECMXdVqJ1JS4ue\x0aA60D8Hu9AgMBAAECggEAPSxx+9+t4nAW8C5sqhGnUX/ZPNAbY9tsLLajE5XppSVD\x0aF18US7KBbv7AhKSOiLsnrwlCzSVlh+9FNkCPMUtdqNyyCJcTaEEs21Ms3VvJZZQO\x0atiwbwKu7ftVSEuhlSx8AMm5Ln/0ivl6H5QSt5+f/vuKnNptpCCTWjQy3VLszZ3Zx\x0a32zRrkBWjfkNGBLNv8mC99YXWZw9BGBDUACtBs+AuXrn1+LLYMQYtTiSbPkVP7pv\x0aeeDvgFq2K6JF6Ko4lnJil1zpkI4tdFLU4w2ETeLQWhNVudgl6/LwWKMrUiY7LNr4\x0avQS6wmMyuebquof4kD3qe2OWiAdx30tlHNSWRkrpWwKBgQD0ShBu4hgI1x5hyIa9\x0a+NxFtIm4MWhSP8pyujg26NlrCQ1hoYSFL+wpwoeiQEa0fttiVyt6T+E89WxnOeB+\x0afRvSMkREZf5HEh+L5eQbUhIabSqfAfx9U+J4s6mlvZPwQJoCnNGs4/QbpDn0omCA\x0a/KImMFe4olRLk/8XuW1WB5IbiwKBgQDpcHdd4Kxl6WnkpJZYvSy2vxVmzZuuKwga\x0a8Nqm2TlWUPJJ6scpoYWZL5ijhr3djAoAKpyF3HcDeXTzWhVDdyXGA/krfYe+EG7p\x0aT4tuUHvwsGAmLzJ6/uL229A6hq3/sXkEsMC3S6aICaXb6whD/S63xHUd8a51ldhb\x0aKwXMkmVO1wKBgG3AqMloguvV2iyMbx0CpdQbXJSIfhoV1trcl0z0KFpSYtSuQF+m\x0aPDA22cEnp5yIMgBosXvuT3+Xs/BcrGOnycwSEWG5gRhlKA8uZeFwafm9ehyeQ9X6\x0azhD0hw+TsNeL7qWl1v4aHB4fFnq2SS0qU59csMyfAchC4aTDBkBUfmwpAoGAHr1W\x0amqAZU5o2/YrG2YyftLjY4p60n2y/Nnz87few2zLxlNY7v7mrVA62dOIrYl8sefUi\x0ag2YSrfxycBEut6Ga8cZYK2fuVhLn6AU3gSFMENfI8X5JkXS7AnLTqsFNbFw8aWe1\x0aGO33UfajRqBeiEVwv3Y5TeYjaQyAXxD9RIEKoiUCgYB9ZQHvflIWZ5DLFDwBQsyT\x0aavARdoc8pbvNqOo0jFfnHxfmYp9CyzcyvxUZWbzzXrnDQlpUaz66d1zrvXAaywSd\x0a9kjibOVMwKjtMnQI9r29dvmvUICKGhWep3xZHEPGyXR28jrUyXZaUVgrhkUx6CKw\x0aH+yNkqSz9nmGA0+5MfoP5Q==\x0a-----END\x20PRIVATE\x20KEY-----\x0a','score','lessonSelector','disabled','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','currentFilters','Open-Ended','Trắc\x20nghiệm','ANSWER','encode','\x20đã\x20chấm</span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22toggle-icon\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22student-group-content\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','open','\x20tự\x20luận\x20đã\x20chấm</span>','private_key','length','exerciseGrid','join','Bạn\x20có\x20chắc\x20muốn\x20nộp\x20bài?\x20Bài\x20làm\x20sẽ\x20được\x20lưu\x20và\x20bạn\x20có\x20thể\x20sửa\x20câu\x20tự\x20luận\x20nếu\x20giáo\x20viên\x20chưa\x20chấm.','POST','<span\x20class=\x22grading-status\x20','</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','showResults','getElementById','<div\x20class=\x22option\x22\x20data-letter=\x22','Lỗi:\x20Chế\x20độ\x20không\x20hợp\x20lệ','Bài\x20làm\x20đã\x20được\x20nộp\x20thành\x20công!','sort','tokenExpiry','33685058Wsodlf','questionIndex','</small></div>','<div\x20class=\x22error\x22\x20style=\x22width:\x20100%;\x20margin:\x200;\x22>Lỗi\x20tải\x20trạng\x20thái</div>','HTTP\x20','letter','confirm-overlay','CACHE_DURATION','question-','pending','userInfo','searchTerm'];_0x1d89=function(){return _0x3bd25f;};return _0x1d89();}function showSkeletonLoading(_0x267f7f,_0xd3cb15=0x3){const _0x59789b=_0x53baa4,_0x2a44ad=document[_0x59789b(0x220)](_0x267f7f);_0x2a44ad[_0x59789b(0x2b5)]=Array(_0xd3cb15)[_0x59789b(0x302)](0x0)[_0x59789b(0x2d3)](()=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22skeleton\x20skeleton-button\x22\x20style=\x22margin:\x208px\x200;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')[_0x59789b(0x21a)]('');}function _0x3ad4(_0x473114,_0x8044e7){const _0x1d8906=_0x1d89();return _0x3ad4=function(_0x3ad444,_0x2f3bb2){_0x3ad444=_0x3ad444-0x16d;let _0x253625=_0x1d8906[_0x3ad444];return _0x253625;},_0x3ad4(_0x473114,_0x8044e7);}class APIService{constructor(){const _0x78457=_0x53baa4;this['accessToken']=null,this[_0x78457(0x225)]=0x0;}async[_0x53baa4(0x1de)](){const _0x1e55df=_0x53baa4;if(this[_0x1e55df(0x1a8)]&&Date['now']()<this[_0x1e55df(0x225)])return this[_0x1e55df(0x1a8)];try{const _0x4a5150=btoa(JSON['stringify']({'alg':_0x1e55df(0x2c3),'typ':_0x1e55df(0x297)})),_0x1e1e3c=Math[_0x1e55df(0x1d9)](Date['now']()/0x3e8),_0x95632f=btoa(JSON[_0x1e55df(0x286)]({'iss':CONFIG[_0x1e55df(0x279)][_0x1e55df(0x1f9)],'scope':'https://www.googleapis.com/auth/spreadsheets','aud':'https://oauth2.googleapis.com/token','exp':_0x1e1e3c+0xe10,'iat':_0x1e1e3c})),_0x132125=_0x4a5150+'.'+_0x95632f,_0x59ad0c=CONFIG[_0x1e55df(0x279)][_0x1e55df(0x217)][_0x1e55df(0x233)](_0x1e55df(0x240),'')['replace'](_0x1e55df(0x1db),'')[_0x1e55df(0x233)](/\s/g,''),_0x5a61b6=atob(_0x59ad0c),_0x193b05=new Uint8Array(_0x5a61b6[_0x1e55df(0x218)]);for(let _0x6eb4f5=0x0;_0x6eb4f5<_0x5a61b6['length'];_0x6eb4f5++){_0x193b05[_0x6eb4f5]=_0x5a61b6['charCodeAt'](_0x6eb4f5);}const _0x714ee8=await crypto[_0x1e55df(0x187)]['importKey']('pkcs8',_0x193b05,{'name':_0x1e55df(0x1aa),'hash':_0x1e55df(0x2ce)},![],[_0x1e55df(0x1b7)]),_0x281ed9=await crypto[_0x1e55df(0x187)][_0x1e55df(0x1b7)](_0x1e55df(0x1aa),_0x714ee8,new TextEncoder()[_0x1e55df(0x213)](_0x132125)),_0x727f48=btoa(String[_0x1e55df(0x243)](...new Uint8Array(_0x281ed9)))[_0x1e55df(0x233)](/\+/g,'-')[_0x1e55df(0x233)](/\//g,'_')['replace'](/=+$/,''),_0x196d9b=_0x132125+'.'+_0x727f48,_0x2e3a49=await fetch('https://oauth2.googleapis.com/token',{'method':_0x1e55df(0x21c),'headers':{'Content-Type':_0x1e55df(0x29d)},'body':_0x1e55df(0x2cd)+_0x196d9b}),_0x267bc7=await _0x2e3a49[_0x1e55df(0x2f8)]();return this['accessToken']=_0x267bc7[_0x1e55df(0x1f6)],this[_0x1e55df(0x225)]=Date[_0x1e55df(0x24b)]()+0xdac*0x3e8,this[_0x1e55df(0x1a8)];}catch(_0x5d9a5f){console[_0x1e55df(0x207)](_0x1e55df(0x1a5),_0x5d9a5f);throw _0x5d9a5f;}}async[_0x53baa4(0x1bd)](_0x2e114d,_0x49943a={},_0x48ae3c=CONFIG[_0x53baa4(0x173)]){const _0x114493=_0x53baa4;for(let _0x5df16a=0x0;_0x5df16a<_0x48ae3c;_0x5df16a++){try{const _0x38302c=await fetch(_0x2e114d,_0x49943a);if(_0x38302c['ok'])return _0x38302c;if(_0x5df16a===_0x48ae3c-0x1)throw new Error(_0x114493(0x22a)+_0x38302c[_0x114493(0x1d1)]);}catch(_0x2cae57){if(_0x5df16a===_0x48ae3c-0x1)throw _0x2cae57;await new Promise(_0x216e40=>setTimeout(_0x216e40,Math[_0x114493(0x1a6)](0x2,_0x5df16a)*0x3e8));}}}async[_0x53baa4(0x1a1)](_0xcae49e,_0x3c5942=!![]){const _0x2866aa=_0x53baa4,_0x2e8967=_0x2866aa(0x17e)+_0xcae49e;if(_0x3c5942){const _0x32ee9a=cache[_0x2866aa(0x241)](_0x2e8967);if(_0x32ee9a)return _0x32ee9a;}const _0xf25bb9=await this['getAccessToken'](),_0x201f7a=_0x2866aa(0x23c)+CONFIG[_0x2866aa(0x2b1)]+'/values/'+_0xcae49e,_0x23b35c=await this[_0x2866aa(0x1bd)](_0x201f7a,{'headers':{'Authorization':_0x2866aa(0x299)+_0xf25bb9}}),_0xab8b90=await _0x23b35c[_0x2866aa(0x2f8)]();if(_0x3c5942)cache[_0x2866aa(0x1da)](_0x2e8967,_0xab8b90);return _0xab8b90;}async[_0x53baa4(0x2d0)](_0xff85b8,_0x238bcf,_0x222ee6){const _0x47b24c=_0x53baa4,_0x5845e1=await this['getAccessToken'](),_0x59a0d4=_0x47b24c(0x23c)+CONFIG[_0x47b24c(0x2b1)]+_0x47b24c(0x2cb)+_0xff85b8+'!'+_0x238bcf+_0x47b24c(0x254);await this[_0x47b24c(0x1bd)](_0x59a0d4,{'method':'PUT','headers':{'Authorization':_0x47b24c(0x299)+_0x5845e1,'Content-Type':_0x47b24c(0x1d3)},'body':JSON[_0x47b24c(0x286)]({'values':[[_0x222ee6]]})}),cache['clear']();}async[_0x53baa4(0x182)](_0x4ad03b,_0x56b4a5){const _0x4b78c7=_0x53baa4,_0x3067cf=await this[_0x4b78c7(0x1de)](),_0xff4259=_0x4b78c7(0x23c)+CONFIG['SPREADSHEET_ID']+_0x4b78c7(0x2cb)+_0x4ad03b+':append?valueInputOption=RAW';await this[_0x4b78c7(0x1bd)](_0xff4259,{'method':'POST','headers':{'Authorization':_0x4b78c7(0x299)+_0x3067cf,'Content-Type':_0x4b78c7(0x1d3)},'body':JSON[_0x4b78c7(0x286)]({'values':_0x56b4a5})}),cache[_0x4b78c7(0x306)]();}async[_0x53baa4(0x19a)](_0x48e999,_0x7a9a2a){const _0x5eed52=_0x53baa4,_0x231b03=await this[_0x5eed52(0x1de)](),_0x103e4e=_0x7a9a2a[_0x5eed52(0x2d3)](_0x5c67d7=>({'range':_0x48e999+'!'+_0x5c67d7['range'],'values':_0x5c67d7[_0x5eed52(0x17c)]})),_0x211df2='https://sheets.googleapis.com/v4/spreadsheets/'+CONFIG[_0x5eed52(0x2b1)]+_0x5eed52(0x175);await this['fetchWithRetry'](_0x211df2,{'method':'POST','headers':{'Authorization':_0x5eed52(0x299)+_0x231b03,'Content-Type':_0x5eed52(0x1d3)},'body':JSON[_0x5eed52(0x286)]({'valueInputOption':'RAW','data':_0x103e4e})}),cache[_0x5eed52(0x306)]();}}const api=new APIService(),state={'mode':'','studentId':'','selectedSession':'','allQuestions':[],'filteredQuestions':[],'sessionsData':{},'allSubmissions':[],'filteredSubmissions':[],'isEditMode':![],'editingSubmissionId':null,'currentFilters':{'status':_0x53baa4(0x196)},'searchTerm':''},StudentModule={async 'init'(){const _0x30bb63=_0x53baa4,_0x5bef80=new URLSearchParams(window[_0x30bb63(0x1eb)][_0x30bb63(0x1ea)]);state[_0x30bb63(0x18e)]=_0x5bef80['get'](_0x30bb63(0x25a))||'';if(!state[_0x30bb63(0x18e)]){document[_0x30bb63(0x220)](_0x30bb63(0x230))[_0x30bb63(0x2a9)]=_0x30bb63(0x1df),document[_0x30bb63(0x220)]('loadingMessage')[_0x30bb63(0x2b5)]='<div\x20class=\x22error\x22>⚠️\x20Vui\x20lòng\x20truy\x20cập\x20với\x20mã\x20học\x20viên\x20trong\x20URL</div>';return;}document[_0x30bb63(0x220)](_0x30bb63(0x230))[_0x30bb63(0x2a9)]=_0x30bb63(0x269),document[_0x30bb63(0x220)](_0x30bb63(0x20c))[_0x30bb63(0x2c0)][_0x30bb63(0x252)]=_0x30bb63(0x2ee),document[_0x30bb63(0x220)](_0x30bb63(0x2c4))[_0x30bb63(0x2b5)]=_0x30bb63(0x246)+state[_0x30bb63(0x18e)]+'</strong>',this['attachEventListeners'](),await this[_0x30bb63(0x2c9)]();},'attachEventListeners'(){const _0x1e5a9e=_0x53baa4;document[_0x1e5a9e(0x220)](_0x1e5a9e(0x267))[_0x1e5a9e(0x1a2)]('change',()=>this[_0x1e5a9e(0x289)]()),document[_0x1e5a9e(0x220)](_0x1e5a9e(0x200))['addEventListener'](_0x1e5a9e(0x1bb),()=>this[_0x1e5a9e(0x1c9)]()),document['getElementById'](_0x1e5a9e(0x1b2))['addEventListener'](_0x1e5a9e(0x1bb),()=>this[_0x1e5a9e(0x199)]()),document[_0x1e5a9e(0x220)]('cancelBtn')[_0x1e5a9e(0x1a2)](_0x1e5a9e(0x1bb),()=>this['cancelEdit']()),document[_0x1e5a9e(0x220)](_0x1e5a9e(0x1f3))['addEventListener'](_0x1e5a9e(0x1bb),()=>this[_0x1e5a9e(0x1a3)]()),document[_0x1e5a9e(0x220)](_0x1e5a9e(0x247))[_0x1e5a9e(0x1a2)](_0x1e5a9e(0x1bb),()=>this[_0x1e5a9e(0x1a3)]());},async 'loadData'(){const _0x5ea78b=_0x53baa4;try{showSkeletonLoading(_0x5ea78b(0x219));const _0x41d594=document[_0x5ea78b(0x220)]('loadingMessage');_0x41d594['innerHTML']='<div\x20class=\x22loading\x22>Đang\x20tải\x20dữ\x20liệu...</div>';const _0x1ec919=await api[_0x5ea78b(0x1a1)](CONFIG[_0x5ea78b(0x1f4)]),_0x13899f=_0x1ec919[_0x5ea78b(0x17c)];if(!_0x13899f||_0x13899f[_0x5ea78b(0x218)]<0x2)throw new Error('Không\x20có\x20dữ\x20liệu\x20câu\x20hỏi');state['allQuestions']=[],state[_0x5ea78b(0x172)]={};for(let _0x53a125=0x1;_0x53a125<_0x13899f[_0x5ea78b(0x218)];_0x53a125++){const _0x4c9390=_0x13899f[_0x53a125];if(_0x4c9390[0x2]&&_0x4c9390[0x0]){const _0x3be4e={'session':_0x4c9390[0x0],'lesson':_0x4c9390[0x1]||'','text':_0x4c9390[0x2],'type':_0x4c9390[0x3]||_0x5ea78b(0x2eb),'option1':_0x4c9390[0x4]||'','option2':_0x4c9390[0x5]||'','option3':_0x4c9390[0x6]||'','option4':_0x4c9390[0x7]||'','option5':_0x4c9390[0x8]||'','correctAnswer':_0x4c9390[0x9]||'','image':_0x4c9390[0xa]||'','explanation':_0x4c9390[0xb]||'','showAnswer':(_0x4c9390[0xc]||'')[_0x5ea78b(0x2a2)]()===_0x5ea78b(0x23e)};state[_0x5ea78b(0x2d5)][_0x5ea78b(0x1fd)](_0x3be4e),state[_0x5ea78b(0x172)][_0x3be4e[_0x5ea78b(0x1fe)]]=!![];}}this[_0x5ea78b(0x28a)](),_0x41d594['innerHTML']='',showNotification(_0x5ea78b(0x24d),_0x5ea78b(0x19f),'',0xbb8),await this['displayOverallStatus']();}catch(_0x43c55f){document[_0x5ea78b(0x220)]('loadingMessage')['innerHTML']=_0x5ea78b(0x2f4)+_0x43c55f['message']+_0x5ea78b(0x1b9),showNotification(_0x43c55f[_0x5ea78b(0x28f)],_0x5ea78b(0x207));}},'populateSessions'(){const _0x39d54e=_0x53baa4,_0x2f5aad=document[_0x39d54e(0x220)](_0x39d54e(0x267));_0x2f5aad[_0x39d54e(0x2b5)]='<option\x20value=\x22\x22>--\x20Chọn\x20buổi\x20học\x20--</option>';const _0xcc7d47=Object[_0x39d54e(0x2da)](state[_0x39d54e(0x172)])['sort']((_0x3cdb96,_0x2a9dd3)=>(parseInt(_0x3cdb96)||0x0)-(parseInt(_0x2a9dd3)||0x0));_0xcc7d47[_0x39d54e(0x1e4)](_0x438482=>{const _0x56bec0=_0x39d54e,_0x576bb1=document['createElement'](_0x56bec0(0x19b));_0x576bb1[_0x56bec0(0x1c5)]=_0x438482,_0x576bb1[_0x56bec0(0x2a9)]=_0x56bec0(0x17b)+_0x438482,_0x2f5aad[_0x56bec0(0x2c6)](_0x576bb1);});},async 'displayOverallStatus'(){const _0x2ebd92=_0x53baa4,_0x28010f=document[_0x2ebd92(0x220)](_0x2ebd92(0x2d8)),_0x2c8072=document[_0x2ebd92(0x220)](_0x2ebd92(0x219));_0x28010f[_0x2ebd92(0x2c0)]['display']=_0x2ebd92(0x2ee);try{const _0x16a67c=await api[_0x2ebd92(0x1a1)](CONFIG[_0x2ebd92(0x27a)]),_0x44d3d1=new Set();_0x16a67c[_0x2ebd92(0x17c)]&&_0x16a67c[_0x2ebd92(0x17c)][_0x2ebd92(0x218)]>0x1&&_0x16a67c[_0x2ebd92(0x17c)][_0x2ebd92(0x1cf)](0x1)[_0x2ebd92(0x1e4)](_0x185dcc=>{const _0x3b9bec=_0x2ebd92;_0x185dcc[COL[_0x3b9bec(0x16d)]]===state[_0x3b9bec(0x18e)]&&_0x185dcc[COL[_0x3b9bec(0x1b5)]]&&_0x44d3d1[_0x3b9bec(0x1af)](_0x185dcc[COL[_0x3b9bec(0x1b5)]]);});const _0x38a393=Object[_0x2ebd92(0x2da)](state[_0x2ebd92(0x172)])[_0x2ebd92(0x224)]((_0x1f3ad,_0x1f0de0)=>(parseInt(_0x1f3ad)||0x0)-(parseInt(_0x1f0de0)||0x0));_0x2c8072[_0x2ebd92(0x2b5)]='',_0x38a393[_0x2ebd92(0x1e4)](_0x3c29f4=>{const _0x3ef413=_0x2ebd92,_0x3cfe4d=document[_0x3ef413(0x26b)](_0x3ef413(0x2ad));_0x3cfe4d['className']='exercise-button',_0x3cfe4d[_0x3ef413(0x2a9)]=_0x3ef413(0x17b)+_0x3c29f4,_0x44d3d1[_0x3ef413(0x185)](_0x3c29f4)&&_0x3cfe4d[_0x3ef413(0x23a)]['add']('completed'),_0x2c8072['appendChild'](_0x3cfe4d);});}catch(_0x517859){_0x2c8072[_0x2ebd92(0x2b5)]=_0x2ebd92(0x229);}},async 'loadHistory'(){const _0xc67e9e=_0x53baa4;state[_0xc67e9e(0x271)]=document['getElementById'](_0xc67e9e(0x267))[_0xc67e9e(0x1c5)];const _0x23ed9e=document[_0xc67e9e(0x220)](_0xc67e9e(0x1ee));if(!state['selectedSession']){_0x23ed9e[_0xc67e9e(0x2b5)]='',document[_0xc67e9e(0x220)]('startNewBtn')[_0xc67e9e(0x2c0)][_0xc67e9e(0x252)]=_0xc67e9e(0x23d),await this[_0xc67e9e(0x176)]();return;}try{_0x23ed9e[_0xc67e9e(0x2b5)]=_0xc67e9e(0x18d);const _0x3722d5=await api['getSheetData'](CONFIG['SUBMISSION_SHEET']),_0x504f44=[],_0x37a8ee=[];if(_0x3722d5[_0xc67e9e(0x17c)]&&_0x3722d5[_0xc67e9e(0x17c)]['length']>0x1)for(let _0x67f0e4=0x1;_0x67f0e4<_0x3722d5['values'][_0xc67e9e(0x218)];_0x67f0e4++){const _0x342d68=_0x3722d5['values'][_0x67f0e4];if(_0x342d68[COL[_0xc67e9e(0x16d)]]===state[_0xc67e9e(0x18e)]&&_0x342d68[COL[_0xc67e9e(0x1b5)]]==state[_0xc67e9e(0x271)]){if(_0x342d68[COL['RECORD_TYPE']]===_0xc67e9e(0x26c))_0x504f44[_0xc67e9e(0x1fd)]({'rowIndex':_0x67f0e4+0x1,'questionText':_0x342d68[COL[_0xc67e9e(0x1d0)]],'questionsDone':_0x342d68[COL[_0xc67e9e(0x1ac)]]||'','answer':_0x342d68[COL[_0xc67e9e(0x212)]],'score':_0x342d68[COL[_0xc67e9e(0x248)]]||'','timestamp':_0x342d68[COL[_0xc67e9e(0x237)]]});else _0x342d68[COL[_0xc67e9e(0x1b4)]]===_0xc67e9e(0x189)&&_0x37a8ee['push']({'rowIndex':_0x67f0e4+0x1,'questionIndex':_0x342d68[COL[_0xc67e9e(0x1fc)]],'questionText':_0x342d68[COL[_0xc67e9e(0x1d0)]],'answer':_0x342d68[COL['ANSWER']],'score':_0x342d68[COL['SCORE']]||'','comment':_0x342d68[COL[_0xc67e9e(0x1bf)]]||'','status':_0x342d68[COL[_0xc67e9e(0x1b1)]]||_0xc67e9e(0x258),'timestamp':_0x342d68[COL[_0xc67e9e(0x237)]]});}}await this['updateLessonStatus'](_0x37a8ee),this[_0xc67e9e(0x2ab)](_0x504f44,_0x37a8ee,_0x23ed9e),document['getElementById']('startNewBtn')['style']['display']=_0xc67e9e(0x2ee);}catch(_0x1c9d21){_0x23ed9e[_0xc67e9e(0x2b5)]=_0xc67e9e(0x2f4)+_0x1c9d21['message']+_0xc67e9e(0x1b9),showNotification(_0x1c9d21[_0xc67e9e(0x28f)],_0xc67e9e(0x207));}},'displayHistory'(_0x130a07,_0x4491d9,_0x3e069f){const _0x534ac8=_0x53baa4;if(_0x130a07[_0x534ac8(0x218)]===0x0&&_0x4491d9[_0x534ac8(0x218)]===0x0){_0x3e069f[_0x534ac8(0x2b5)]='<p\x20style=\x22color:\x20#5f6368;\x20font-size:\x2013px;\x20margin:\x2016px\x200;\x22>Chưa\x20có\x20bài\x20làm\x20nào\x20cho\x20buổi\x20này.</p>';return;}_0x3e069f[_0x534ac8(0x2b5)]=_0x534ac8(0x2f9);const _0x56aca1={};_0x130a07[_0x534ac8(0x1e4)](_0x4b3d94=>{const _0x23c088=_0x534ac8;!_0x56aca1[_0x4b3d94[_0x23c088(0x2d4)]]&&(_0x56aca1[_0x4b3d94[_0x23c088(0x2d4)]]={'multipleChoice':null,'openEnded':[]}),_0x56aca1[_0x4b3d94[_0x23c088(0x2d4)]][_0x23c088(0x2b4)]=_0x4b3d94;}),_0x4491d9[_0x534ac8(0x1e4)](_0x5c6f09=>{const _0x370b44=_0x534ac8;!_0x56aca1[_0x5c6f09[_0x370b44(0x2d4)]]&&(_0x56aca1[_0x5c6f09[_0x370b44(0x2d4)]]={'multipleChoice':null,'openEnded':[]}),_0x56aca1[_0x5c6f09['timestamp']][_0x370b44(0x24a)][_0x370b44(0x1fd)](_0x5c6f09);}),Object[_0x534ac8(0x2da)](_0x56aca1)[_0x534ac8(0x224)]()[_0x534ac8(0x2b9)]()[_0x534ac8(0x1e4)]((_0x3cb334,_0x35796f)=>{const _0x26d4b4=_0x534ac8,_0x2d88f4=_0x56aca1[_0x3cb334],_0x2987c1=document[_0x26d4b4(0x26b)]('div');_0x2987c1['className']=_0x26d4b4(0x278),_0x2987c1[_0x26d4b4(0x1c0)]=()=>this['viewSubmissionDetails'](_0x2d88f4);let _0x3226f7='',_0x5617b8='';_0x2d88f4[_0x26d4b4(0x2b4)]&&(_0x3226f7+=_0x26d4b4(0x2f6)+_0x2d88f4[_0x26d4b4(0x2b4)][_0x26d4b4(0x2dc)]+_0x26d4b4(0x287),_0x5617b8+=_0x26d4b4(0x1ed)+_0x2d88f4['multipleChoice'][_0x26d4b4(0x2dc)]+'</div>');if(_0x2d88f4['openEnded'][_0x26d4b4(0x218)]>0x0){const _0x22a25b=_0x2d88f4[_0x26d4b4(0x24a)][_0x26d4b4(0x288)](_0x456e83=>_0x456e83[_0x26d4b4(0x1d1)]===_0x26d4b4(0x1e7))[_0x26d4b4(0x218)];_0x3226f7+=_0x26d4b4(0x21d)+(_0x22a25b===_0x2d88f4['openEnded']['length']?_0x26d4b4(0x29c):'pending')+_0x26d4b4(0x1d8)+_0x22a25b+'/'+_0x2d88f4['openEnded'][_0x26d4b4(0x218)]+_0x26d4b4(0x216),_0x5617b8+=_0x26d4b4(0x28e)+_0x2d88f4[_0x26d4b4(0x24a)][_0x26d4b4(0x218)]+_0x26d4b4(0x261);}_0x2987c1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>Lần\x20'+(Object[_0x26d4b4(0x2da)](_0x56aca1)[_0x26d4b4(0x218)]-_0x35796f)+_0x26d4b4(0x2f7)+_0x3226f7+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-time\x22>'+_0x3cb334+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5617b8+_0x26d4b4(0x2e9),_0x3e069f[_0x26d4b4(0x2c6)](_0x2987c1);});},async 'updateLessonStatus'(_0x1f3db2){const _0x17930e=_0x53baa4,_0x3b4cc9=document['getElementById'](_0x17930e(0x2d8)),_0x28640a=document[_0x17930e(0x220)](_0x17930e(0x219)),_0x37948b=document[_0x17930e(0x220)]('exerciseStatusHeader');_0x37948b[_0x17930e(0x2a9)]='Tình\x20trạng\x20Bài\x20tập\x20-\x20Buổi\x20'+state[_0x17930e(0x271)];const _0x33819a=state[_0x17930e(0x2d5)]['filter'](_0x4d35c7=>_0x4d35c7['session']==state[_0x17930e(0x271)]);if(_0x33819a[_0x17930e(0x218)]===0x0){_0x3b4cc9['style']['display']=_0x17930e(0x23d);return;}const _0x1f967c=[...new Set(_0x33819a[_0x17930e(0x2d3)](_0x155ba7=>_0x155ba7[_0x17930e(0x303)])[_0x17930e(0x288)](Boolean))]['sort']((_0x4d8657,_0x34f907)=>{const _0x493f7e=_0x17930e,_0x15ffe2=parseInt(_0x4d8657[_0x493f7e(0x233)](/[^0-9]/g,''),0xa)||0x0,_0x28d4c2=parseInt(_0x34f907[_0x493f7e(0x233)](/[^0-9]/g,''),0xa)||0x0;return _0x15ffe2-_0x28d4c2;}),_0x2a467d=new Set();try{const _0x1dfcd0=await api['getSheetData'](CONFIG['SUBMISSION_SHEET']);if(_0x1dfcd0['values']&&_0x1dfcd0['values'][_0x17930e(0x218)]>0x1){const _0x4da5d4=new Set();for(let _0x4354b9=0x1;_0x4354b9<_0x1dfcd0[_0x17930e(0x17c)][_0x17930e(0x218)];_0x4354b9++){const _0x588730=_0x1dfcd0[_0x17930e(0x17c)][_0x4354b9];if(_0x588730[COL[_0x17930e(0x16d)]]===state[_0x17930e(0x18e)]&&_0x588730[COL[_0x17930e(0x1b5)]]==state[_0x17930e(0x271)]){if(_0x588730[COL[_0x17930e(0x1b4)]]==='TongKetTracNghiem'&&_0x588730[COL[_0x17930e(0x1ac)]]){const _0x44aa17=_0x588730[COL[_0x17930e(0x1ac)]][_0x17930e(0x2d2)](',')['map'](_0x5b6bc2=>parseInt(_0x5b6bc2[_0x17930e(0x24f)]()));_0x44aa17[_0x17930e(0x1e4)](_0x53343c=>_0x4da5d4[_0x17930e(0x1af)](_0x53343c));}_0x588730[COL['RECORD_TYPE']]===_0x17930e(0x189)&&_0x588730[COL[_0x17930e(0x1fc)]]&&_0x4da5d4[_0x17930e(0x1af)](parseInt(_0x588730[COL[_0x17930e(0x1fc)]]));}}_0x4da5d4[_0x17930e(0x1e4)](_0x361375=>{const _0x28d4c8=_0x17930e,_0x360c58=_0x33819a[_0x28d4c8(0x1d4)]((_0x53289a,_0x23d9fc)=>_0x23d9fc+0x1===_0x361375);_0x360c58&&_0x360c58[_0x28d4c8(0x303)]&&_0x2a467d['add'](_0x360c58[_0x28d4c8(0x303)]);});}}catch(_0x2f2ba1){console[_0x17930e(0x207)]('Lỗi\x20khi\x20tải\x20trạng\x20thái:',_0x2f2ba1);}_0x28640a[_0x17930e(0x2b5)]='',_0x1f967c[_0x17930e(0x218)]===0x0?_0x28640a[_0x17930e(0x2b5)]=_0x17930e(0x24e):_0x1f967c['forEach'](_0x50ddcc=>{const _0x52c6ce=_0x17930e,_0x947c67=document[_0x52c6ce(0x26b)](_0x52c6ce(0x2ad));_0x947c67['className']='exercise-button',_0x947c67[_0x52c6ce(0x2a9)]=_0x50ddcc,_0x2a467d[_0x52c6ce(0x185)](_0x50ddcc)&&_0x947c67['classList']['add'](_0x52c6ce(0x1f1)),_0x28640a[_0x52c6ce(0x2c6)](_0x947c67);}),_0x3b4cc9[_0x17930e(0x2c0)][_0x17930e(0x252)]='block';},'viewSubmissionDetails'(_0x340925){const _0x4b4ab6=_0x53baa4;document[_0x4b4ab6(0x220)](_0x4b4ab6(0x20c))[_0x4b4ab6(0x2c0)][_0x4b4ab6(0x252)]='none',document[_0x4b4ab6(0x220)](_0x4b4ab6(0x2c8))[_0x4b4ab6(0x2c0)][_0x4b4ab6(0x252)]='block',document[_0x4b4ab6(0x220)]('historyTitle')[_0x4b4ab6(0x2a9)]=_0x4b4ab6(0x23b)+state['selectedSession'];const _0x213e83=document['getElementById'](_0x4b4ab6(0x1f8));_0x213e83['innerHTML']='';if(_0x340925[_0x4b4ab6(0x2b4)]){const _0x119ffe=_0x340925[_0x4b4ab6(0x2b4)],_0x497ef0=document[_0x4b4ab6(0x26b)](_0x4b4ab6(0x2ad));_0x497ef0['className']=_0x4b4ab6(0x234),_0x497ef0['innerHTML']=_0x4b4ab6(0x1ce)+_0x119ffe[_0x4b4ab6(0x2d4)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22grading-status\x20graded\x22>Đã\x20hoàn\x20thành</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22answer-section\x22><h4>Kết\x20quả:</h4><div\x20class=\x22answer-content\x22>'+_0x119ffe[_0x4b4ab6(0x29a)]+_0x4b4ab6(0x26a)+_0x119ffe['answer']+_0x4b4ab6(0x1f7)+_0x119ffe[_0x4b4ab6(0x2db)]+_0x4b4ab6(0x264)+_0x119ffe[_0x4b4ab6(0x20b)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x213e83[_0x4b4ab6(0x2c6)](_0x497ef0);}_0x340925[_0x4b4ab6(0x24a)][_0x4b4ab6(0x1e4)](_0x44ef91=>{const _0x17fac6=_0x4b4ab6,_0x942783=_0x44ef91[_0x17fac6(0x1d1)]===_0x17fac6(0x1e7),_0x2a8e99=document[_0x17fac6(0x26b)](_0x17fac6(0x2ad));_0x2a8e99['className']=_0x17fac6(0x234),_0x2a8e99['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22submission-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22submission-info\x22><strong>Câu\x20'+_0x44ef91[_0x17fac6(0x227)]+_0x17fac6(0x1c2)+_0x44ef91[_0x17fac6(0x2d4)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22grading-status\x20'+(_0x942783?_0x17fac6(0x29c):'pending')+'\x22>'+_0x44ef91[_0x17fac6(0x1d1)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22answer-section\x22><h4>Câu\x20hỏi:</h4><div\x20class=\x22answer-content\x22>'+_0x44ef91[_0x17fac6(0x29a)]+_0x17fac6(0x16f)+(_0x44ef91[_0x17fac6(0x2dc)]||_0x17fac6(0x1ca))+_0x17fac6(0x276)+(_0x942783?'<div\x20class=\x22grade-display\x22>🎯\x20Điểm:\x20'+_0x44ef91[_0x17fac6(0x20b)]+_0x17fac6(0x20e)+(_0x44ef91['comment']?_0x17fac6(0x1f5)+_0x44ef91[_0x17fac6(0x1d5)]+_0x17fac6(0x1b9):''):_0x17fac6(0x188)+_0x44ef91[_0x17fac6(0x304)]+_0x17fac6(0x206)+_0x44ef91['questionText'][_0x17fac6(0x233)](/`/g,'\x5c`')+_0x17fac6(0x257)+(_0x44ef91[_0x17fac6(0x2dc)]||'')[_0x17fac6(0x233)](/`/g,'\x5c`')+_0x17fac6(0x198)+_0x44ef91[_0x17fac6(0x227)]+_0x17fac6(0x29e))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x213e83[_0x17fac6(0x2c6)](_0x2a8e99);});},'editSubmission'(_0x3e269,_0x7b8de1,_0x239f00,_0x50b11f){const _0x451369=_0x53baa4;state[_0x451369(0x2bd)]=!![],state['editingSubmissionId']=_0x3e269,document[_0x451369(0x220)](_0x451369(0x2c8))[_0x451369(0x2c0)][_0x451369(0x252)]='none',document['getElementById'](_0x451369(0x2e2))['style'][_0x451369(0x252)]=_0x451369(0x2ee),document[_0x451369(0x220)](_0x451369(0x1b0))[_0x451369(0x2a9)]='Sửa\x20Câu\x20'+_0x50b11f+_0x451369(0x1cd)+state['selectedSession'],document[_0x451369(0x220)](_0x451369(0x2e7))[_0x451369(0x2a9)]='Chỉnh\x20sửa\x20câu\x20trả\x20lời\x20của\x20bạn';const _0x443aa6=document['getElementById'](_0x451369(0x2ba));_0x443aa6[_0x451369(0x2b5)]=_0x451369(0x191)+_0x50b11f+_0x451369(0x2fa)+_0x7b8de1+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22options\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20class=\x22open-ended-input\x22\x20id=\x22editAnswer\x22>'+_0x239f00+_0x451369(0x21e),document['getElementById'](_0x451369(0x1b2))[_0x451369(0x2a9)]=_0x451369(0x2e4),document[_0x451369(0x220)](_0x451369(0x2bc))[_0x451369(0x2c0)]['display']='block';},'cancelEdit'(){const _0x434577=_0x53baa4;state['isEditMode']=![],state[_0x434577(0x19e)]=null,document[_0x434577(0x220)](_0x434577(0x2e2))['style'][_0x434577(0x252)]=_0x434577(0x23d),document[_0x434577(0x220)](_0x434577(0x20c))[_0x434577(0x2c0)][_0x434577(0x252)]=_0x434577(0x2ee),document['getElementById'](_0x434577(0x1b2))[_0x434577(0x2a9)]=_0x434577(0x1bc);},'startNewQuiz'(){const _0x459115=_0x53baa4;state[_0x459115(0x2bd)]=![],state[_0x459115(0x19e)]=null,state['filteredQuestions']=state['allQuestions'][_0x459115(0x288)](_0x599162=>_0x599162[_0x459115(0x1fe)]==state[_0x459115(0x271)]);if(state[_0x459115(0x209)][_0x459115(0x218)]===0x0){showNotification(_0x459115(0x284),'warning');return;}document[_0x459115(0x220)](_0x459115(0x20c))[_0x459115(0x2c0)][_0x459115(0x252)]=_0x459115(0x23d),document[_0x459115(0x220)](_0x459115(0x2e2))['style']['display']=_0x459115(0x2ee),document['getElementById']('quizTitle')[_0x459115(0x2a9)]='Bài\x20Tập\x20Buổi\x20'+state[_0x459115(0x271)],document['getElementById'](_0x459115(0x2e7))[_0x459115(0x2a9)]=_0x459115(0x1e9),document['getElementById'](_0x459115(0x1b2))[_0x459115(0x2a9)]='Nộp\x20Bài',document[_0x459115(0x220)](_0x459115(0x2bc))['style'][_0x459115(0x252)]=_0x459115(0x23d),this['displayQuestions'](),showNotification(_0x459115(0x2a0)+state[_0x459115(0x209)][_0x459115(0x218)]+_0x459115(0x2b7),'info','',0xbb8);},'displayQuestions'(){const _0x55bc0b=_0x53baa4,_0x14e792=document[_0x55bc0b(0x220)](_0x55bc0b(0x2ba));_0x14e792[_0x55bc0b(0x2b5)]='',state[_0x55bc0b(0x209)][_0x55bc0b(0x1e4)]((_0x550b49,_0x39c56e)=>{const _0x13004f=_0x55bc0b,_0x3278c9=document[_0x13004f(0x26b)](_0x13004f(0x2ad));_0x3278c9[_0x13004f(0x29f)]=_0x13004f(0x18f),_0x3278c9['id']=_0x13004f(0x22e)+_0x39c56e;let _0x313833='<div\x20class=\x22question-number\x22>Câu\x20'+(_0x39c56e+0x1)+_0x13004f(0x236)+this[_0x13004f(0x265)](_0x550b49[_0x13004f(0x2de)])+'</span>';_0x550b49[_0x13004f(0x25f)]&&(_0x313833+=_0x13004f(0x1ba)+_0x550b49[_0x13004f(0x25f)]+'\x22\x20class=\x22question-image\x22\x20alt=\x22Question\x20image\x22>');_0x313833+=_0x13004f(0x1dc)+_0x550b49['text']+'</div><div\x20class=\x22options\x22>';if(_0x550b49[_0x13004f(0x2de)]===_0x13004f(0x2eb)){const _0x55624c=[_0x550b49['option1'],_0x550b49[_0x13004f(0x1f2)],_0x550b49[_0x13004f(0x298)],_0x550b49[_0x13004f(0x2ae)],_0x550b49[_0x13004f(0x28d)]],_0x374489=['A','B','C','D','E'];_0x55624c[_0x13004f(0x1e4)]((_0x2fd829,_0x1d6acd)=>{const _0x3bac00=_0x13004f;_0x2fd829&&(_0x313833+=_0x3bac00(0x221)+_0x374489[_0x1d6acd]+'\x22>'+_0x374489[_0x1d6acd]+'.\x20'+_0x2fd829+'</div>');});}else{if(_0x550b49[_0x13004f(0x2de)]==='Checkbox'){const _0x3e9357=[_0x550b49['option1'],_0x550b49[_0x13004f(0x1f2)],_0x550b49[_0x13004f(0x298)],_0x550b49[_0x13004f(0x2ae)],_0x550b49[_0x13004f(0x28d)]],_0x2de049=['A','B','C','D','E'];_0x3e9357[_0x13004f(0x1e4)]((_0x3aef77,_0x57dbd5)=>{const _0x104aa0=_0x13004f;_0x3aef77&&(_0x313833+=_0x104aa0(0x2ef)+_0x39c56e+'_opt'+_0x57dbd5+'\x22\x20value=\x22'+_0x2de049[_0x57dbd5]+'\x22><label\x20for=\x22q'+_0x39c56e+_0x104aa0(0x1ec)+_0x57dbd5+'\x22>'+_0x2de049[_0x57dbd5]+'.\x20'+_0x3aef77+_0x104aa0(0x1f0));});}else{if(_0x550b49[_0x13004f(0x2de)]===_0x13004f(0x2a6)){const _0x5e68d7=[_0x550b49[_0x13004f(0x294)],_0x550b49[_0x13004f(0x1f2)],_0x550b49['option3'],_0x550b49[_0x13004f(0x2ae)],_0x550b49[_0x13004f(0x28d)]],_0x31f9a8=['A','B','C','D','E'];let _0x104e7e=0x0;_0x5e68d7[_0x13004f(0x1e4)]((_0x231c3a,_0x2a4df7)=>{const _0x60805b=_0x13004f;_0x231c3a&&(_0x104e7e++,_0x313833+=_0x60805b(0x290)+_0x104e7e+_0x60805b(0x308)+_0x39c56e+'-'+_0x31f9a8[_0x2a4df7]+_0x60805b(0x2ac)+_0x31f9a8[_0x2a4df7]+_0x60805b(0x244)+_0x231c3a+_0x60805b(0x2fc));});}else _0x550b49[_0x13004f(0x2de)]==='Open-Ended'&&(_0x313833+=_0x13004f(0x242)+_0x39c56e+_0x13004f(0x2d9));}}_0x313833+=_0x13004f(0x1b9),_0x3278c9[_0x13004f(0x2b5)]=_0x313833,_0x550b49[_0x13004f(0x2de)]===_0x13004f(0x2eb)&&_0x3278c9[_0x13004f(0x2cf)](_0x13004f(0x1fb))['forEach'](_0x44b32f=>{const _0x280914=_0x13004f;_0x44b32f['addEventListener'](_0x280914(0x1bb),function(){const _0x5c6d3f=_0x280914;_0x3278c9['querySelectorAll'](_0x5c6d3f(0x1fb))[_0x5c6d3f(0x1e4)](_0xe834ec=>_0xe834ec[_0x5c6d3f(0x23a)][_0x5c6d3f(0x250)](_0x5c6d3f(0x16e))),this[_0x5c6d3f(0x23a)][_0x5c6d3f(0x1af)](_0x5c6d3f(0x16e));});}),_0x14e792['appendChild'](_0x3278c9);});},'getTypeLabel'(_0x41c63b){const _0x218b4b=_0x53baa4,_0x3bf8ba={'Multiple\x20Choice':_0x218b4b(0x211),'Checkbox':'Nhiều\x20đáp\x20án','Fill-in-the-Blank':_0x218b4b(0x270),'Open-Ended':_0x218b4b(0x2a5)};return _0x3bf8ba[_0x41c63b]||_0x41c63b;},async 'submitAnswers'(){const _0x1cb017=_0x53baa4;if(state[_0x1cb017(0x2bd)]){const _0xf1e6cf=document[_0x1cb017(0x220)]('editAnswer')['value'][_0x1cb017(0x24f)]();if(!_0xf1e6cf){showNotification(_0x1cb017(0x2af),_0x1cb017(0x23f));return;}try{await api[_0x1cb017(0x2d0)](CONFIG['SUBMISSION_SHEET'],''+String['fromCharCode'](0x41+COL[_0x1cb017(0x212)])+state[_0x1cb017(0x19e)],_0xf1e6cf),showNotification('Đã\x20cập\x20nhật\x20câu\x20trả\x20lời\x20thành\x20công',_0x1cb017(0x19f)),this[_0x1cb017(0x2d1)](),this[_0x1cb017(0x289)]();}catch(_0x52ac37){showNotification(_0x1cb017(0x193)+_0x52ac37[_0x1cb017(0x28f)],_0x1cb017(0x207));}return;}showConfirm(_0x1cb017(0x21b),'Xác\x20nhận\x20nộp\x20bài',async()=>{const _0x45463c=_0x1cb017;await this[_0x45463c(0x2aa)]();});},async 'processSubmission'(){const _0x5a177e=_0x53baa4,_0x594d00=[];let _0x3f27d2=0x0;const _0x215659=[],_0x3c8413=[];state[_0x5a177e(0x209)][_0x5a177e(0x1e4)]((_0x467417,_0x33c44a)=>{const _0x45b864=_0x5a177e;let _0x4b9556='',_0x5c615a=![];if(_0x467417['type']==='Multiple\x20Choice'){const _0x124841=document[_0x45b864(0x26e)](_0x45b864(0x1c7)+_0x33c44a+_0x45b864(0x177));_0x124841&&(_0x4b9556=_0x124841[_0x45b864(0x29b)][_0x45b864(0x22b)],_0x5c615a=_0x4b9556===_0x467417[_0x45b864(0x1ef)][_0x45b864(0x24f)]()[_0x45b864(0x2f0)](),_0x3c8413[_0x45b864(0x1fd)](_0x33c44a+0x1));}else{if(_0x467417[_0x45b864(0x2de)]===_0x45b864(0x25e)){const _0x53ec54=Array[_0x45b864(0x235)](document['querySelectorAll'](_0x45b864(0x1c7)+_0x33c44a+_0x45b864(0x24c)))[_0x45b864(0x2d3)](_0x3ee7d2=>_0x3ee7d2[_0x45b864(0x1c5)]);_0x4b9556=_0x53ec54[_0x45b864(0x224)]()[_0x45b864(0x21a)](',');const _0x249b89=_0x467417[_0x45b864(0x1ef)][_0x45b864(0x2d2)](',')[_0x45b864(0x2d3)](_0x349b5b=>_0x349b5b[_0x45b864(0x24f)]()[_0x45b864(0x2f0)]())[_0x45b864(0x224)]();_0x5c615a=_0x53ec54[_0x45b864(0x218)]===_0x249b89['length']&&_0x53ec54[_0x45b864(0x1ae)](_0x26cf9d=>_0x249b89[_0x45b864(0x171)](_0x26cf9d));if(_0x53ec54[_0x45b864(0x218)]>0x0)_0x3c8413['push'](_0x33c44a+0x1);}else{if(_0x467417[_0x45b864(0x2de)]==='Fill-in-the-Blank'){const _0x43fcf2=['A','B','C','D','E'],_0x177c3a=[_0x467417['option1'],_0x467417[_0x45b864(0x1f2)],_0x467417[_0x45b864(0x298)],_0x467417['option4'],_0x467417['option5']],_0x1682fe=[];let _0x3bd019=![];const _0x469c64=[];_0x43fcf2[_0x45b864(0x1e4)]((_0x4b3032,_0x24a7a9)=>{const _0x4b8396=_0x45b864;_0x177c3a[_0x24a7a9]&&_0x469c64[_0x4b8396(0x1fd)]({'letter':_0x4b3032,'index':_0x24a7a9,'correctAnswer':_0x177c3a[_0x24a7a9]});}),_0x469c64['forEach'](_0x2f3b3f=>{const _0x3ab8d3=_0x45b864,_0x1abf1=document[_0x3ab8d3(0x220)](_0x3ab8d3(0x2e6)+_0x33c44a+'-'+_0x2f3b3f['letter']);if(_0x1abf1){const _0x121cbf=_0x1abf1[_0x3ab8d3(0x1c5)]['trim']();_0x121cbf&&(_0x1682fe[_0x3ab8d3(0x1fd)]('Ô\x20'+(_0x469c64[_0x3ab8d3(0x307)](_0x1eecad=>_0x1eecad[_0x3ab8d3(0x22b)]===_0x2f3b3f[_0x3ab8d3(0x22b)])+0x1)+':'+_0x121cbf),_0x3bd019=!![]);}}),_0x4b9556=_0x1682fe['join'](_0x45b864(0x28b));if(_0x3bd019){let _0x27e27a=!![],_0x2b3cbd=0x0;_0x469c64[_0x45b864(0x1e4)](_0x35a7a1=>{const _0xaa10c=_0x45b864,_0x537dc3=document[_0xaa10c(0x220)](_0xaa10c(0x2e6)+_0x33c44a+'-'+_0x35a7a1[_0xaa10c(0x22b)]);if(_0x537dc3){const _0x25c8ec=_0x537dc3[_0xaa10c(0x1c5)][_0xaa10c(0x24f)]()[_0xaa10c(0x2a2)](),_0x4ffe70=_0x35a7a1['correctAnswer'][_0xaa10c(0x2d2)](/[\/,]/)[_0xaa10c(0x2d3)](_0x448b36=>_0x448b36['trim']()['toLowerCase']());!_0x25c8ec||!_0x4ffe70[_0xaa10c(0x171)](_0x25c8ec)?_0x27e27a=![]:_0x2b3cbd++;}}),_0x5c615a=_0x27e27a&&_0x2b3cbd===_0x469c64[_0x45b864(0x218)];if(_0x3bd019)_0x3c8413[_0x45b864(0x1fd)](_0x33c44a+0x1);}}else _0x467417['type']===_0x45b864(0x210)&&(_0x4b9556=document[_0x45b864(0x220)](_0x45b864(0x2b2)+_0x33c44a)[_0x45b864(0x1c5)]['trim'](),_0x215659[_0x45b864(0x1fd)]({'questionIndex':_0x33c44a+0x1,'questionText':_0x467417[_0x45b864(0x251)],'answer':_0x4b9556}),_0x5c615a=null);}}if(_0x5c615a===!![])_0x3f27d2++;_0x594d00[_0x45b864(0x1fd)]({'questionIndex':_0x33c44a+0x1,'question':_0x467417[_0x45b864(0x251)],'userAnswer':_0x4b9556,'isCorrect':_0x5c615a});});const _0x165a5b=new Date()[_0x5a177e(0x285)](_0x5a177e(0x192));await this[_0x5a177e(0x2e1)](_0x3f27d2,_0x594d00,_0x215659,_0x3c8413,_0x165a5b),this[_0x5a177e(0x21f)](_0x3f27d2,_0x594d00);},async 'saveSubmission'(_0x47044c,_0x459c39,_0x3655c3,_0x3e0879,_0x5737db){const _0x8f603f=_0x53baa4,_0x171bea=[];_0x3655c3[_0x8f603f(0x1e4)](_0x4910af=>{const _0x323730=_0x8f603f,_0xe432b=new Array(0xb)[_0x323730(0x302)]('');_0xe432b[COL[_0x323730(0x16d)]]=state[_0x323730(0x18e)],_0xe432b[COL['SESSION']]=state[_0x323730(0x271)],_0xe432b[COL[_0x323730(0x1b4)]]=_0x323730(0x189),_0xe432b[COL[_0x323730(0x1fc)]]=_0x4910af[_0x323730(0x227)],_0xe432b[COL[_0x323730(0x1d0)]]=_0x4910af['questionText'],_0xe432b[COL['QUESTIONS_DONE']]='',_0xe432b[COL[_0x323730(0x212)]]=_0x4910af[_0x323730(0x2dc)],_0xe432b[COL[_0x323730(0x248)]]='',_0xe432b[COL[_0x323730(0x1bf)]]='',_0xe432b[COL[_0x323730(0x1b1)]]=_0x323730(0x258),_0xe432b[COL[_0x323730(0x237)]]=_0x5737db,_0x171bea[_0x323730(0x1fd)](_0xe432b);});const _0xdc0ccb=_0x459c39[_0x8f603f(0x288)](_0x5b265a=>_0x5b265a['isCorrect']!==null)['length'];if(_0xdc0ccb>0x0){const _0x2fc4b7=new Array(0xb)[_0x8f603f(0x302)]('');_0x2fc4b7[COL['STUDENT_ID']]=state[_0x8f603f(0x18e)],_0x2fc4b7[COL[_0x8f603f(0x1b5)]]=state[_0x8f603f(0x271)],_0x2fc4b7[COL[_0x8f603f(0x1b4)]]=_0x8f603f(0x26c),_0x2fc4b7[COL[_0x8f603f(0x1fc)]]='',_0x2fc4b7[COL[_0x8f603f(0x1d0)]]=_0x8f603f(0x183)+_0xdc0ccb+_0x8f603f(0x2fd),_0x2fc4b7[COL[_0x8f603f(0x1ac)]]=_0x3e0879[_0x8f603f(0x21a)](','),_0x2fc4b7[COL[_0x8f603f(0x212)]]=_0x47044c+'/'+_0xdc0ccb,_0x2fc4b7[COL[_0x8f603f(0x248)]]=_0x47044c,_0x2fc4b7[COL['COMMENT']]='',_0x2fc4b7[COL[_0x8f603f(0x1b1)]]=_0x8f603f(0x2c2),_0x2fc4b7[COL['TIMESTAMP']]=_0x5737db,_0x171bea['push'](_0x2fc4b7);}if(_0x171bea[_0x8f603f(0x218)]>0x0)try{await api[_0x8f603f(0x182)](CONFIG[_0x8f603f(0x27a)],_0x171bea);}catch(_0x4b4bb0){console[_0x8f603f(0x207)](_0x8f603f(0x2b0),_0x4b4bb0),showNotification('Có\x20lỗi\x20xảy\x20ra\x20khi\x20lưu\x20bài\x20làm.',_0x8f603f(0x207));}},'showResults'(_0xb67b39,_0x42adb6){const _0x49b589=_0x53baa4;document[_0x49b589(0x220)](_0x49b589(0x2e2))[_0x49b589(0x2c0)][_0x49b589(0x252)]=_0x49b589(0x23d),document[_0x49b589(0x220)](_0x49b589(0x170))[_0x49b589(0x2c0)][_0x49b589(0x252)]=_0x49b589(0x2ee);const _0x33a657=state['filteredQuestions']['filter'](_0x337915=>_0x337915[_0x49b589(0x2de)]!==_0x49b589(0x210))['length'],_0x2c416d=_0x33a657>0x0?Math['round'](_0xb67b39/_0x33a657*0x64):0x0;document[_0x49b589(0x220)]('finalScore')[_0x49b589(0x2a9)]=_0xb67b39+'/'+_0x33a657+'\x20('+_0x2c416d+'%)';let _0x5a3ccd=_0x2c416d>=0x50?_0x49b589(0x205):_0x2c416d>=0x3c?_0x49b589(0x1e5):_0x49b589(0x203);const _0xe5d344=state[_0x49b589(0x209)][_0x49b589(0x288)](_0x2ff37f=>_0x2ff37f[_0x49b589(0x2de)]===_0x49b589(0x210))[_0x49b589(0x218)];_0xe5d344>0x0&&(_0x5a3ccd+=_0x49b589(0x186)+_0xe5d344+_0x49b589(0x1b8));document[_0x49b589(0x220)](_0x49b589(0x1ab))[_0x49b589(0x2a9)]=_0x5a3ccd;const _0x300158=document[_0x49b589(0x220)]('resultDetails');_0x300158[_0x49b589(0x2b5)]=_0x49b589(0x178),_0x42adb6[_0x49b589(0x1e4)](_0x58031f=>{const _0x2ab9ba=_0x49b589,_0x3aa339=_0x58031f['isCorrect']===null?_0x2ab9ba(0x215):_0x58031f['isCorrect']?_0x2ab9ba(0x300):_0x2ab9ba(0x283),_0x24f0cb=_0x58031f[_0x2ab9ba(0x18c)]===null?_0x2ab9ba(0x180):_0x58031f['isCorrect']?_0x2ab9ba(0x293):_0x2ab9ba(0x260);_0x300158[_0x2ab9ba(0x2b5)]+='<div\x20class=\x22result-item\x20'+_0x3aa339+_0x2ab9ba(0x25c)+_0x58031f[_0x2ab9ba(0x227)]+':</strong>\x20'+_0x24f0cb+_0x2ab9ba(0x1e1)+_0x58031f['question']+_0x2ab9ba(0x228);}),showNotification(_0x49b589(0x223),'success');},'backToMenu'(){const _0x5f3669=_0x53baa4;document[_0x5f3669(0x220)](_0x5f3669(0x170))[_0x5f3669(0x2c0)][_0x5f3669(0x252)]=_0x5f3669(0x23d),document['getElementById']('historyContainer')['style']['display']=_0x5f3669(0x23d),document['getElementById'](_0x5f3669(0x20c))[_0x5f3669(0x2c0)]['display']=_0x5f3669(0x2ee),document[_0x5f3669(0x220)]('sessionSelect')['value']='',this['loadHistory']();}},TeacherModule={async 'init'(){const _0x4905d9=_0x53baa4;document['getElementById'](_0x4905d9(0x230))['textContent']=_0x4905d9(0x179),document[_0x4905d9(0x220)]('teacherPanel')['style'][_0x4905d9(0x252)]=_0x4905d9(0x2ee),this[_0x4905d9(0x1e3)](),await this['loadData']();},'attachEventListeners'(){const _0x102227=_0x53baa4;document[_0x102227(0x220)](_0x102227(0x2a7))[_0x102227(0x1a2)]('change',()=>this['loadSubmissions']()),document[_0x102227(0x220)]('backToTeacherPanelBtn')['addEventListener'](_0x102227(0x1bb),()=>this[_0x102227(0x27e)]()),document['getElementById'](_0x102227(0x305))[_0x102227(0x1a2)](_0x102227(0x1bb),()=>this[_0x102227(0x25b)]()),document[_0x102227(0x2cf)](_0x102227(0x1a0))[_0x102227(0x1e4)](_0x24cac1=>{const _0x5a09cf=_0x102227;_0x24cac1[_0x5a09cf(0x1a2)](_0x5a09cf(0x1bb),_0x462b9c=>{const _0x387a69=_0x5a09cf,_0x26034c=_0x462b9c[_0x387a69(0x204)][_0x387a69(0x29b)]['filter'];this[_0x387a69(0x2a8)](_0x26034c);});});const _0x57c31b=document[_0x102227(0x220)](_0x102227(0x277));_0x57c31b['addEventListener'](_0x102227(0x2ea),debounce(_0x13bae4=>{const _0x2e2d15=_0x102227;state[_0x2e2d15(0x231)]=_0x13bae4[_0x2e2d15(0x2d6)][_0x2e2d15(0x1c5)]['trim']()[_0x2e2d15(0x2a2)](),this[_0x2e2d15(0x2e5)]();},CONFIG['DEBOUNCE_DELAY']));},async 'loadData'(){const _0x306d67=_0x53baa4;try{const _0x7baeca=document[_0x306d67(0x220)](_0x306d67(0x1be));_0x7baeca[_0x306d67(0x2b5)]=_0x306d67(0x262);const _0x2b0fca=await api[_0x306d67(0x1a1)](CONFIG[_0x306d67(0x1f4)]),_0x2774b0=_0x2b0fca['values'];state[_0x306d67(0x172)]={};if(_0x2774b0&&_0x2774b0[_0x306d67(0x218)]>0x1)for(let _0x46b941=0x1;_0x46b941<_0x2774b0[_0x306d67(0x218)];_0x46b941++){if(_0x2774b0[_0x46b941][0x0])state[_0x306d67(0x172)][_0x2774b0[_0x46b941][0x0]]=!![];}const _0x3992e8=document[_0x306d67(0x220)]('teacherSessionSelect');_0x3992e8[_0x306d67(0x2b5)]=_0x306d67(0x1d2);const _0x239c1a=Object[_0x306d67(0x2da)](state[_0x306d67(0x172)])[_0x306d67(0x224)]((_0x5a36a1,_0x3c54de)=>(parseInt(_0x5a36a1)||0x0)-(parseInt(_0x3c54de)||0x0));_0x239c1a[_0x306d67(0x1e4)](_0x20fa92=>{const _0x42251d=_0x306d67,_0x4bf7e4=document[_0x42251d(0x26b)](_0x42251d(0x19b));_0x4bf7e4[_0x42251d(0x1c5)]=_0x20fa92,_0x4bf7e4['textContent']=_0x42251d(0x17b)+_0x20fa92,_0x3992e8['appendChild'](_0x4bf7e4);}),_0x7baeca['innerHTML']='',showNotification('Dữ\x20liệu\x20đã\x20được\x20tải\x20thành\x20công','success','',0xbb8);}catch(_0x16272c){document[_0x306d67(0x220)]('teacherLoadingMessage')[_0x306d67(0x2b5)]=_0x306d67(0x2f4)+_0x16272c[_0x306d67(0x28f)]+_0x306d67(0x1b9),showNotification(_0x16272c[_0x306d67(0x28f)],_0x306d67(0x207));}},async 'loadSubmissions'(){const _0x56b18=_0x53baa4,_0x3deb2d=document[_0x56b18(0x220)](_0x56b18(0x2a7))[_0x56b18(0x1c5)];if(!_0x3deb2d)return;try{const _0x2a5e77=document[_0x56b18(0x220)](_0x56b18(0x1be));_0x2a5e77['innerHTML']='<div\x20class=\x22loading\x22>Đang\x20tải\x20bài\x20tự\x20luận...</div>';const _0x227302=await api[_0x56b18(0x1a1)](CONFIG[_0x56b18(0x27a)],![]),_0x463eb2=_0x227302['values'];state['allSubmissions']=[];if(_0x463eb2&&_0x463eb2[_0x56b18(0x218)]>0x1)for(let _0x1caf97=0x1;_0x1caf97<_0x463eb2[_0x56b18(0x218)];_0x1caf97++){const _0x3e4fb0=_0x463eb2[_0x1caf97],_0x16bc6d=_0x3deb2d===_0x56b18(0x196)||_0x3e4fb0[COL[_0x56b18(0x1b5)]]==_0x3deb2d;_0x16bc6d&&_0x3e4fb0[COL[_0x56b18(0x1b4)]]===_0x56b18(0x189)&&state['allSubmissions'][_0x56b18(0x1fd)]({'rowIndex':_0x1caf97+0x1,'studentId':_0x3e4fb0[COL[_0x56b18(0x16d)]],'session':_0x3e4fb0[COL[_0x56b18(0x1b5)]],'questionIndex':_0x3e4fb0[COL[_0x56b18(0x1fc)]],'questionText':_0x3e4fb0[COL[_0x56b18(0x1d0)]],'answer':_0x3e4fb0[COL[_0x56b18(0x212)]],'score':_0x3e4fb0[COL[_0x56b18(0x248)]]||'','comment':_0x3e4fb0[COL[_0x56b18(0x1bf)]]||'','status':_0x3e4fb0[COL['STATUS']]||_0x56b18(0x258),'timestamp':_0x3e4fb0[COL[_0x56b18(0x237)]]});}_0x2a5e77[_0x56b18(0x2b5)]='';const _0x2be8fc=_0x3deb2d===_0x56b18(0x196)?_0x56b18(0x259):_0x56b18(0x17b)+_0x3deb2d;document[_0x56b18(0x220)]('gradingTitle')['textContent']=_0x56b18(0x27f)+_0x2be8fc;if(state['allSubmissions']['length']===0x0){document[_0x56b18(0x220)](_0x56b18(0x1c6))[_0x56b18(0x2c0)][_0x56b18(0x252)]=_0x56b18(0x23d),document[_0x56b18(0x220)](_0x56b18(0x1fa))[_0x56b18(0x2c0)][_0x56b18(0x252)]=_0x56b18(0x23d),document[_0x56b18(0x220)](_0x56b18(0x268))['style'][_0x56b18(0x252)]='block',document['getElementById'](_0x56b18(0x1c3))[_0x56b18(0x2b5)]='',document['getElementById'](_0x56b18(0x27c))[_0x56b18(0x2b5)]=_0x56b18(0x2be);return;}document[_0x56b18(0x220)](_0x56b18(0x1c6))['style'][_0x56b18(0x252)]=_0x56b18(0x23d),document[_0x56b18(0x220)](_0x56b18(0x1fa))[_0x56b18(0x2c0)][_0x56b18(0x252)]=_0x56b18(0x2ee),document['getElementById']('gradingContainer')[_0x56b18(0x2c0)][_0x56b18(0x252)]=_0x56b18(0x2ee),document[_0x56b18(0x220)](_0x56b18(0x277))[_0x56b18(0x1c5)]='',state[_0x56b18(0x231)]='',state[_0x56b18(0x20f)]={'status':_0x56b18(0x22f)},document[_0x56b18(0x220)]('status_pending')['checked']=!![],this[_0x56b18(0x2e5)](),showNotification(_0x56b18(0x1c8)+state[_0x56b18(0x2dd)][_0x56b18(0x218)]+'\x20bài\x20tự\x20luận','success','',0xbb8);}catch(_0x140334){document[_0x56b18(0x220)]('teacherLoadingMessage')['innerHTML']='<div\x20class=\x22error\x22>Lỗi:\x20'+_0x140334[_0x56b18(0x28f)]+'</div>',showNotification(_0x140334[_0x56b18(0x28f)],'error');}},'toggleFilter'(){const _0x5db2c0=_0x53baa4,_0x553e00=document['getElementById'](_0x5db2c0(0x266)),_0x5c0ef2=document[_0x5db2c0(0x220)](_0x5db2c0(0x28c));_0x553e00['classList'][_0x5db2c0(0x1b3)](_0x5db2c0(0x17d)),_0x5c0ef2['classList'][_0x5db2c0(0x1b3)]('rotated');},'selectFilter'(_0x1b2911){const _0x46dd9e=_0x53baa4;state['currentFilters'][_0x46dd9e(0x1d1)]=_0x1b2911,document[_0x46dd9e(0x220)](_0x46dd9e(0x197)+_0x1b2911)[_0x46dd9e(0x2ed)]=!![],this[_0x46dd9e(0x2e5)]();},'applyFilters'(){const _0xe107c8=_0x53baa4;state[_0xe107c8(0x2bf)]=state[_0xe107c8(0x2dd)]['filter'](_0x13b2aa=>{const _0x56f518=_0xe107c8,_0x488177=state[_0x56f518(0x20f)][_0x56f518(0x1d1)]===_0x56f518(0x196)||state[_0x56f518(0x20f)][_0x56f518(0x1d1)]===_0x56f518(0x29c)&&_0x13b2aa['status']===_0x56f518(0x1e7)||state[_0x56f518(0x20f)][_0x56f518(0x1d1)]===_0x56f518(0x22f)&&_0x13b2aa['status']==='Chưa\x20chấm',_0x4cdccb=!state['searchTerm']||_0x13b2aa['studentId']['toLowerCase']()['includes'](state['searchTerm']);return _0x488177&&_0x4cdccb;}),this['displaySubmissions']();},'displaySubmissions'(){const _0x3b8f00=_0x53baa4,_0x57f0de=state['allSubmissions'][_0x3b8f00(0x218)],_0x584d5e=state[_0x3b8f00(0x2bf)]['length'],_0x253a40=state[_0x3b8f00(0x2bf)][_0x3b8f00(0x288)](_0x747569=>_0x747569['status']===_0x3b8f00(0x1e7))[_0x3b8f00(0x218)],_0x2aa83f=_0x584d5e-_0x253a40;document[_0x3b8f00(0x220)](_0x3b8f00(0x1c3))[_0x3b8f00(0x2b5)]=_0x3b8f00(0x280)+_0x584d5e+_0x3b8f00(0x2e0)+_0x253a40+_0x3b8f00(0x245)+_0x2aa83f+_0x3b8f00(0x17f)+_0x57f0de+_0x3b8f00(0x2b6);const _0x39718d=document[_0x3b8f00(0x220)](_0x3b8f00(0x27c)),_0x5d39d8=new Set();_0x39718d['querySelectorAll'](_0x3b8f00(0x238))['forEach'](_0x400d13=>{const _0x2267ab=_0x3b8f00;_0x400d13[_0x2267ab(0x2ca)][_0x2267ab(0x29b)][_0x2267ab(0x292)]&&_0x5d39d8[_0x2267ab(0x1af)](_0x400d13['parentElement'][_0x2267ab(0x29b)][_0x2267ab(0x292)]);});if(state[_0x3b8f00(0x2bf)][_0x3b8f00(0x218)]===0x0){_0x39718d['innerHTML']=_0x3b8f00(0x2d7);return;}const _0x402087=state[_0x3b8f00(0x2bf)][_0x3b8f00(0x255)]((_0x42fbf2,_0x230994)=>{const _0x13e64f=_0x3b8f00;return(_0x42fbf2[_0x230994[_0x13e64f(0x18e)]]=_0x42fbf2[_0x230994[_0x13e64f(0x18e)]]||[])[_0x13e64f(0x1fd)](_0x230994),_0x42fbf2;},{});_0x39718d[_0x3b8f00(0x2b5)]='';for(const _0x498554 in _0x402087){const _0x4899f6=_0x402087[_0x498554],_0x2c2fff=document[_0x3b8f00(0x26b)](_0x3b8f00(0x2ad));_0x2c2fff[_0x3b8f00(0x29f)]=_0x3b8f00(0x2e3),_0x2c2fff[_0x3b8f00(0x253)](_0x3b8f00(0x1a4),_0x498554);const _0x57bafa=_0x4899f6[_0x3b8f00(0x288)](_0x26b874=>_0x26b874[_0x3b8f00(0x1d1)]===_0x3b8f00(0x1e7))['length'],_0x329c52=_0x4899f6[_0x3b8f00(0x218)];_0x2c2fff[_0x3b8f00(0x2b5)]=_0x3b8f00(0x295)+_0x498554+_0x3b8f00(0x256)+_0x57bafa+'/'+_0x329c52+_0x3b8f00(0x214);const _0x17c560=_0x2c2fff[_0x3b8f00(0x26e)](_0x3b8f00(0x26d));_0x17c560[_0x3b8f00(0x1a2)](_0x3b8f00(0x1bb),()=>this[_0x3b8f00(0x2ff)](_0x17c560));const _0x4ed4c8=_0x2c2fff[_0x3b8f00(0x26e)](_0x3b8f00(0x17a));_0x4899f6[_0x3b8f00(0x1e4)](_0x54c157=>{const _0x493237=_0x3b8f00,_0xcf73be=document[_0x493237(0x26b)]('div');_0xcf73be[_0x493237(0x29f)]=_0x493237(0x234);const _0x2a7cf9=_0x54c157[_0x493237(0x1d1)]===_0x493237(0x1e7);_0xcf73be[_0x493237(0x2b5)]=_0x493237(0x195)+_0x54c157[_0x493237(0x227)]+_0x493237(0x1cd)+_0x54c157[_0x493237(0x1fe)]+'</strong>'+_0x54c157[_0x493237(0x2d4)]+_0x493237(0x25d)+(_0x2a7cf9?_0x493237(0x29c):'pending')+'\x22>'+_0x54c157[_0x493237(0x1d1)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22answer-section\x22><h4>Câu\x20hỏi:</h4><div\x20class=\x22answer-content\x22>'+_0x54c157[_0x493237(0x29a)]+'</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22answer-section\x22><h4>Câu\x20trả\x20lời:</h4><div\x20class=\x22answer-content\x22>'+(_0x54c157[_0x493237(0x2dc)]||'(Không\x20có\x20câu\x20trả\x20lời)')+_0x493237(0x2f2)+_0x54c157['rowIndex']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20class=\x22grade-input\x22\x20value=\x22'+_0x54c157['score']+_0x493237(0x2bb)+_0x54c157['comment']+_0x493237(0x296)+(_0x2a7cf9?_0x493237(0x26f):_0x493237(0x1ff))+_0x493237(0x239);const _0x25fd88=_0xcf73be[_0x493237(0x26e)]('.grade-btn');_0x25fd88[_0x493237(0x1a2)](_0x493237(0x1bb),()=>this[_0x493237(0x272)](_0x54c157[_0x493237(0x304)],_0xcf73be)),_0x4ed4c8['appendChild'](_0xcf73be);}),_0x39718d[_0x3b8f00(0x2c6)](_0x2c2fff);}_0x5d39d8[_0x3b8f00(0x1e4)](_0x4ee89b=>{const _0x5f22e9=_0x3b8f00,_0x55d82c=_0x39718d['querySelector'](_0x5f22e9(0x181)+_0x4ee89b+'\x22]');if(_0x55d82c){const _0x440719=_0x55d82c['querySelector'](_0x5f22e9(0x17a)),_0x24b268=_0x55d82c['querySelector'](_0x5f22e9(0x2f5));_0x440719&&_0x24b268&&(_0x440719[_0x5f22e9(0x23a)]['add'](_0x5f22e9(0x17d)),_0x24b268['classList'][_0x5f22e9(0x1af)](_0x5f22e9(0x2ec)));}});},'toggleStudentGroup'(_0x5e8402){const _0x1d15ad=_0x53baa4,_0x53a1df=_0x5e8402['nextElementSibling'],_0x43c80e=_0x5e8402[_0x1d15ad(0x26e)]('.toggle-icon');_0x53a1df[_0x1d15ad(0x23a)][_0x1d15ad(0x1b3)](_0x1d15ad(0x17d)),_0x43c80e[_0x1d15ad(0x23a)][_0x1d15ad(0x1b3)](_0x1d15ad(0x2ec));},async 'gradeSubmission'(_0x47d2f5,_0xcfd766){const _0x557624=_0x53baa4,_0x16c413=_0xcfd766['querySelector'](_0x557624(0x1c4)),_0x202f25=_0x16c413[_0x557624(0x26e)](_0x557624(0x19c)),_0x6c2a8b=_0x16c413[_0x557624(0x26e)](_0x557624(0x2a3)),_0x33af38=_0x16c413['querySelector']('.grade-btn'),_0x57da3c=_0x202f25[_0x557624(0x1c5)][_0x557624(0x24f)](),_0xffd6b9=_0x6c2a8b[_0x557624(0x1c5)][_0x557624(0x24f)]();if(_0x57da3c===''){showNotification(_0x557624(0x18a),_0x557624(0x23f));return;}const _0x1fb042=_0x33af38[_0x557624(0x2a9)];_0x33af38[_0x557624(0x2a9)]='Đang\x20lưu...',_0x33af38[_0x557624(0x20d)]=!![];try{const _0x144e2e=[{'range':''+String['fromCharCode'](0x41+COL[_0x557624(0x248)])+_0x47d2f5+':'+String['fromCharCode'](0x41+COL[_0x557624(0x1b1)])+_0x47d2f5,'values':[[_0x57da3c,_0xffd6b9,_0x557624(0x1e7)]]}];await api[_0x557624(0x19a)](CONFIG[_0x557624(0x27a)],_0x144e2e);const _0x2c72de=state[_0x557624(0x2dd)][_0x557624(0x1d4)](_0x486fc9=>_0x486fc9['rowIndex']===_0x47d2f5);_0x2c72de&&(_0x2c72de[_0x557624(0x20b)]=_0x57da3c,_0x2c72de[_0x557624(0x1d5)]=_0xffd6b9,_0x2c72de[_0x557624(0x1d1)]='Đã\x20chấm'),this[_0x557624(0x2e5)](),showNotification(_0x557624(0x2c7),_0x557624(0x19f));}catch(_0x2c3557){showNotification('Lỗi\x20khi\x20lưu:\x20'+_0x2c3557[_0x557624(0x28f)],_0x557624(0x207)),_0x33af38[_0x557624(0x2a9)]=_0x1fb042,_0x33af38[_0x557624(0x20d)]=![];}},'backToPanel'(){const _0xd2a8df=_0x53baa4;document[_0xd2a8df(0x220)](_0xd2a8df(0x268))['style'][_0xd2a8df(0x252)]='none',document[_0xd2a8df(0x220)](_0xd2a8df(0x1fa))[_0xd2a8df(0x2c0)][_0xd2a8df(0x252)]=_0xd2a8df(0x23d),document[_0xd2a8df(0x220)]('teacherPanel')[_0xd2a8df(0x2c0)][_0xd2a8df(0x252)]=_0xd2a8df(0x2ee),document[_0xd2a8df(0x220)](_0xd2a8df(0x2a7))[_0xd2a8df(0x1c5)]='';}},app={'student':StudentModule,'teacher':TeacherModule,async 'init'(){const _0x55b2fb=_0x53baa4;try{const _0x38c5fe=new URLSearchParams(window[_0x55b2fb(0x1eb)][_0x55b2fb(0x1ea)]),_0x567e8d=_0x38c5fe['get']('mode');if(_0x567e8d===_0x55b2fb(0x18b))state[_0x55b2fb(0x1a7)]=_0x55b2fb(0x2df),await TeacherModule[_0x55b2fb(0x2f1)]();else _0x567e8d===_0x55b2fb(0x281)?(state[_0x55b2fb(0x1a7)]='student',await StudentModule[_0x55b2fb(0x2f1)]()):(document[_0x55b2fb(0x220)](_0x55b2fb(0x230))[_0x55b2fb(0x2a9)]=_0x55b2fb(0x222),document[_0x55b2fb(0x220)](_0x55b2fb(0x27b))['innerHTML']=_0x55b2fb(0x2c5));}catch(_0x48fb6a){console[_0x55b2fb(0x207)](_0x55b2fb(0x2c1),_0x48fb6a),showNotification(_0x55b2fb(0x1cc)+_0x48fb6a['message'],_0x55b2fb(0x207));}}};window[_0x53baa4(0x174)]=()=>app['init'](),window[_0x53baa4(0x1e8)]=app;
    </script>
</body>
</html>
